import{An as e,Cn as t,Gn as n,Mn as r,Nn as i,On as a,jn as o,kn as s}from"./index-BU9aUuzf.js";import{t as c}from"./v4-CbYvpsTg.js";o(),i();var l=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),u=function(e){l(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(r);i();var d=n(t()),f=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},p.apply(this,arguments)},m=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},h=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},g=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},_=function(e){f(t,e);function t(t,n){var r=e.call(this)||this;if(r._handleMessage=function(e){if(r._injectedProvider&&e.source===window||e.origin===r._providerUrl.origin&&e.source===r._popup){if(e.data.method===`connected`){var t=new a(e.data.params.publicKey);(!r._publicKey||!r._publicKey.equals(t))&&(r._publicKey&&!r._publicKey.equals(t)&&r._handleDisconnect(),r._publicKey=t,r._autoApprove=!!e.data.params.autoApprove,r.emit(`connect`,r._publicKey))}else if(e.data.method===`disconnected`)r._handleDisconnect();else if((e.data.result||e.data.error)&&r._responsePromises.has(e.data.id)){var n=g(r._responsePromises.get(e.data.id),2),i=n[0],o=n[1];e.data.result?i(e.data.result):o(Error(e.data.error))}}},r._handleConnect=function(){return r._handlerAdded||(r._handlerAdded=!0,window.addEventListener(`message`,r._handleMessage),window.addEventListener(`beforeunload`,r.disconnect)),r._injectedProvider?new Promise(function(e){r._sendRequest(`connect`,{}),e()}):(window.name=`parent`,r._popup=window.open(r._providerUrl.toString(),`_blank`,`location,resizable,width=460,height=675`),new Promise(function(e){r.once(`connect`,e)}))},r._handleDisconnect=function(){r._handlerAdded&&(r._handlerAdded=!1,window.removeEventListener(`message`,r._handleMessage),window.removeEventListener(`beforeunload`,r.disconnect)),r._publicKey&&(r._publicKey=null,r.emit(`disconnect`)),r._responsePromises.forEach(function(e,t){var n=g(e,2);n[0];var i=n[1];r._responsePromises.delete(t),i(`Wallet disconnected`)})},r._sendRequest=function(e,t){return m(r,void 0,void 0,function(){var n,r=this;return h(this,function(i){if(e!==`connect`&&!this.connected)throw Error(`Wallet not connected`);return n=this._nextRequestId,++this._nextRequestId,[2,new Promise(function(i,a){r._responsePromises.set(n,[i,a]),r._injectedProvider?r._injectedProvider.postMessage({jsonrpc:`2.0`,id:n,method:e,params:p({network:r._network},t)}):(r._popup.postMessage({jsonrpc:`2.0`,id:n,method:e,params:t},r._providerUrl.origin),r.autoApprove||r._popup.focus())})]})})},r.connect=function(){return r._popup&&r._popup.close(),r._handleConnect()},r.disconnect=function(){return m(r,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return this._injectedProvider?[4,this._sendRequest(`disconnect`,{})]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._popup&&this._popup.close(),this._handleDisconnect(),[2]}})})},r.sign=function(e,t){return m(r,void 0,void 0,function(){var n,r,i;return h(this,function(o){switch(o.label){case 0:if(!(e instanceof Uint8Array))throw Error(`Data must be an instance of Uint8Array`);return[4,this._sendRequest(`sign`,{data:e,display:t})];case 1:return n=o.sent(),r=d.default.decode(n.signature),i=new a(n.publicKey),[2,{signature:r,publicKey:i}]}})})},y(t))r._injectedProvider=t;else if(v(t))r._providerUrl=new URL(t),r._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:n}).toString();else throw Error(`provider parameter must be an injected provider or a URL string.`);return r._network=n,r._publicKey=null,r._autoApprove=!1,r._popup=null,r._handlerAdded=!1,r._nextRequestId=1,r._responsePromises=new Map,r}return Object.defineProperty(t.prototype,`publicKey`,{get:function(){return this._publicKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`connected`,{get:function(){return this._publicKey!==null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`autoApprove`,{get:function(){return this._autoApprove},enumerable:!1,configurable:!0}),t}(r);function v(e){return typeof e==`string`}function y(e){return b(e)&&x(e.postMessage)}function b(e){return typeof e==`object`&&!!e}function x(e){return typeof e==`function`}var S=n(t()),C=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),w=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},T=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},E=function(e){C(t,e);function t(t,n,r){var i=e.call(this)||this;return i._instance=null,i.handleMessage=function(e){},i._sendRequest=function(e,t){return w(i,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this._instance?.sendRequest?[4,this._instance.sendRequest(e,t)]:[3,2];case 1:return[2,n.sent()];case 2:return this._instance?._sendRequest?[4,this._instance._sendRequest(e,t)]:[3,4];case 3:return[2,n.sent()];case 4:throw Error("Unsupported version of `@project-serum/sol-wallet-adapter`")}})})},i._handleConnect=function(){i.emit(`connect`)},i._handleDisconnect=function(){window.clearInterval(i._pollTimer),i.emit(`disconnect`)},i._network=n,i._provider=r,i}return Object.defineProperty(t.prototype,`publicKey`,{get:function(){return this._instance.publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`connected`,{get:function(){return this._instance.connected||!1},enumerable:!1,configurable:!0}),t.prototype.connect=function(){return w(this,void 0,void 0,function(){var e=this;return T(this,function(t){switch(t.label){case 0:return this._instance=new _(this._provider,this._network),this._instance.on(`connect`,this._handleConnect),this._instance.on(`disconnect`,this._handleDisconnect),this._pollTimer=window.setInterval(function(){e._instance?._popup?.closed!==!1&&e._handleDisconnect()},200),[4,this._instance.connect()];case 1:return t.sent(),[2]}})})},t.prototype.disconnect=function(){return w(this,void 0,void 0,function(){return T(this,function(e){switch(e.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return this._instance.removeAllListeners(`connect`),this._instance.removeAllListeners(`disconnect`),[4,this._instance.disconnect()];case 1:return e.sent(),[2]}})})},t.prototype.signTransaction=function(e){return w(this,void 0,void 0,function(){var t;return T(this,function(n){switch(n.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._sendRequest(`signTransactionV2`,{transaction:S.default.encode(e)})];case 1:return t=n.sent().transaction,[2,S.default.decode(t)]}})})},t.prototype.signAllTransactions=function(e){return w(this,void 0,void 0,function(){var t;return T(this,function(n){switch(n.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._sendRequest(`signAllTransactionsV2`,{transactions:e.map(function(e){return S.default.encode(e)})})];case 1:return t=n.sent().transactions,[2,t.map(function(e){return S.default.decode(e)})]}})})},t.prototype.signAndSendTransaction=function(e,t){return w(this,void 0,void 0,function(){var n;return T(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._sendRequest(`signAndSendTransaction`,{transaction:S.default.encode(e),options:t})];case 1:return n=r.sent(),[2,n.signature]}})})},t.prototype.signMessage=function(e,t){return t===void 0&&(t=`hex`),w(this,void 0,void 0,function(){var n;return T(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._instance.sign(e,t)];case 1:return n=r.sent().signature,[2,Uint8Array.from(n)]}})})},t}(u);o();var D=n(t()),O=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},k.apply(this,arguments)},A=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},j=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},M=function(e){O(t,e);function t(t,n){var r=this;return r=e.call(this)||this,r._publicKey=null,r._messageHandlers={},r.handleMessage=function(e){if(r._messageHandlers[e.id]){var t=r._messageHandlers[e.id],n=t.resolve,i=t.reject;delete r._messageHandlers[e.id],e.error?i(e.error):n(e.result)}},r._sendMessage=function(e){if(!r.connected)throw Error(`Wallet not connected`);return new Promise(function(t,n){var i,a=c();r._messageHandlers[a]={resolve:t,reject:n},(i=r._iframe?.contentWindow)==null||i.postMessage({channel:`solflareWalletAdapterToIframe`,data:k({id:a},e)},`*`)})},r._iframe=t,r._publicKey=new a((n?.toString)?.call(n)),r}return Object.defineProperty(t.prototype,`publicKey`,{get:function(){return this._publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`connected`,{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.connect=function(){return A(this,void 0,void 0,function(){return j(this,function(e){return[2]})})},t.prototype.disconnect=function(){return A(this,void 0,void 0,function(){return j(this,function(e){switch(e.label){case 0:return[4,this._sendMessage({method:`disconnect`})];case 1:return e.sent(),[2]}})})},t.prototype.signTransaction=function(e){return A(this,void 0,void 0,function(){var t,n;return j(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._sendMessage({method:`signTransaction`,params:{transaction:D.default.encode(e)}})];case 2:return t=r.sent(),[2,D.default.decode(t)];case 3:throw n=r.sent(),Error((n?.toString)?.call(n)||`Failed to sign transaction`);case 4:return[2]}})})},t.prototype.signAllTransactions=function(e){return A(this,void 0,void 0,function(){var t,n;return j(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._sendMessage({method:`signAllTransactions`,params:{transactions:e.map(function(e){return D.default.encode(e)})}})];case 2:return t=r.sent(),[2,t.map(function(e){return D.default.decode(e)})];case 3:throw n=r.sent(),Error((n?.toString)?.call(n)||`Failed to sign transactions`);case 4:return[2]}})})},t.prototype.signAndSendTransaction=function(e,t){return A(this,void 0,void 0,function(){var n,r;return j(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._sendMessage({method:`signAndSendTransaction`,params:{transaction:D.default.encode(e),options:t}})];case 2:return n=i.sent(),[2,n];case 3:throw r=i.sent(),Error((r?.toString)?.call(r)||`Failed to sign and send transaction`);case 4:return[2]}})})},t.prototype.signMessage=function(e,t){return t===void 0&&(t=`hex`),A(this,void 0,void 0,function(){var n,r;return j(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._sendMessage({method:`signMessage`,params:{data:e,display:t}})];case 2:return n=i.sent(),[2,Uint8Array.from(D.default.decode(n))];case 3:throw r=i.sent(),Error((r?.toString)?.call(r)||`Failed to sign message`);case 4:return[2]}})})},t}(u);function N(e){return e.version===void 0}o(),i();var P=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},F.apply(this,arguments)},I=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},L=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},R=function(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)},z=function(t){P(n,t);function n(e){var r=t.call(this)||this;return r._network=`mainnet-beta`,r._provider=null,r._iframeParams={},r._adapterInstance=null,r._element=null,r._iframe=null,r._connectHandler=null,r._flutterHandlerInterval=null,r._handleEvent=function(e){switch(e.type){case`connect_native_web`:r._collapseIframe(),r._adapterInstance=new E(r._iframe,r._network,e.data?.provider||r._provider||`https://solflare.com/provider`),r._adapterInstance.on(`connect`,r._webConnected),r._adapterInstance.on(`disconnect`,r._webDisconnected),r._adapterInstance.connect(),r._setPreferredAdapter(`native_web`);return;case`connect`:r._collapseIframe(),r._adapterInstance=new M(r._iframe,e.data?.publicKey||``),r._adapterInstance.connect(),r._setPreferredAdapter(e.data?.adapter),r._connectHandler&&=(r._connectHandler.resolve(),null),r.emit(`connect`,r.publicKey);return;case`disconnect`:r._connectHandler&&=(r._connectHandler.reject(),null),r._disconnected(),r.emit(`disconnect`);return;case`accountChanged`:e.data?.publicKey?(r._adapterInstance=new M(r._iframe,e.data.publicKey),r._adapterInstance.connect(),r.emit(`accountChanged`,r.publicKey)):r.emit(`accountChanged`,void 0);return;case`collapse`:r._collapseIframe();return;default:return}},r._handleResize=function(e){e.resizeMode===`full`?e.params.mode===`fullscreen`?r._expandIframe():e.params.mode===`hide`&&r._collapseIframe():e.resizeMode===`coordinates`&&r._iframe&&(r._iframe.style.top=isFinite(e.params.top)?`${e.params.top}px`:``,r._iframe.style.bottom=isFinite(e.params.bottom)?`${e.params.bottom}px`:``,r._iframe.style.left=isFinite(e.params.left)?`${e.params.left}px`:``,r._iframe.style.right=isFinite(e.params.right)?`${e.params.right}px`:``,r._iframe.style.width=isFinite(e.params.width)?`${e.params.width}px`:e.params.width,r._iframe.style.height=isFinite(e.params.height)?`${e.params.height}px`:e.params.height)},r._handleMessage=function(e){if(e.data?.channel===`solflareIframeToWalletAdapter`){var t=e.data.data||{};t.type===`event`?r._handleEvent(t.event):t.type===`resize`?r._handleResize(t):t.type===`response`&&r._adapterInstance&&r._adapterInstance.handleMessage(t)}},r._removeElement=function(){r._flutterHandlerInterval!==null&&(clearInterval(r._flutterHandlerInterval),r._flutterHandlerInterval=null),r._element&&=(r._element.remove(),null)},r._removeDanglingElements=function(){var e,t,n=document.getElementsByClassName(`solflare-wallet-adapter-iframe`);try{for(var r=R(n),i=r.next();!i.done;i=r.next()){var a=i.value;a.parentElement&&a.remove()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},r._injectElement=function(){r._removeElement(),r._removeDanglingElements();var e=F(F({},r._iframeParams),{cluster:r._network||`mainnet-beta`,origin:window.location.origin||``,title:document.title||``,version:1,sdkVersion:`1.4.2`}),t=r._getPreferredAdapter();t&&(e.adapter=t),r._provider&&(e.provider=r._provider);var i=Object.keys(e).map(function(t){return`${t}=${encodeURIComponent(e[t])}`}).join(`&`),a=`${n.IFRAME_URL}?${i}`;r._element=document.createElement(`div`),r._element.className=`solflare-wallet-adapter-iframe`,r._element.innerHTML=`
      <iframe src='${a}' referrerPolicy='strict-origin-when-cross-origin' style='position: fixed; top: 0; bottom: 0; left: 0; right: 0; width: 100%; height: 100%; border: none; border-radius: 0; z-index: 99999; color-scheme: auto;' allowtransparency='true'></iframe>
    `,document.body.appendChild(r._element),r._iframe=r._element.querySelector(`iframe`),window.fromFlutter=r._handleMobileMessage,r._flutterHandlerInterval=setInterval(function(){window.fromFlutter=r._handleMobileMessage},100),window.addEventListener(`message`,r._handleMessage,!1)},r._collapseIframe=function(){r._iframe&&(r._iframe.style.top=``,r._iframe.style.right=``,r._iframe.style.height=`2px`,r._iframe.style.width=`2px`)},r._expandIframe=function(){r._iframe&&(r._iframe.style.top=`0px`,r._iframe.style.bottom=`0px`,r._iframe.style.left=`0px`,r._iframe.style.right=`0px`,r._iframe.style.width=`100%`,r._iframe.style.height=`100%`)},r._getPreferredAdapter=function(){return localStorage&&localStorage.getItem(`solflarePreferredWalletAdapter`)||null},r._setPreferredAdapter=function(e){localStorage&&e&&localStorage.setItem(`solflarePreferredWalletAdapter`,e)},r._clearPreferredAdapter=function(){localStorage&&localStorage.removeItem(`solflarePreferredWalletAdapter`)},r._webConnected=function(){r._connectHandler&&=(r._connectHandler.resolve(),null),r.emit(`connect`,r.publicKey)},r._webDisconnected=function(){r._connectHandler&&=(r._connectHandler.reject(),null),r._disconnected(),r.emit(`disconnect`)},r._disconnected=function(){window.removeEventListener(`message`,r._handleMessage,!1),r._removeElement(),r._clearPreferredAdapter(),r._adapterInstance=null},r._handleMobileMessage=function(e){var t;(t=r._iframe?.contentWindow)==null||t.postMessage({channel:`solflareMobileToIframe`,data:e},`*`)},e?.network&&(r._network=e?.network),e?.provider&&(r._provider=e?.provider),e?.params&&(r._iframeParams=F({},e?.params)),r}return Object.defineProperty(n.prototype,`publicKey`,{get:function(){return this._adapterInstance?.publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,`isConnected`,{get:function(){return!!this._adapterInstance?.connected},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,`connected`,{get:function(){return this.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,`autoApprove`,{get:function(){return!1},enumerable:!1,configurable:!0}),n.prototype.connect=function(){return I(this,void 0,void 0,function(){var e=this;return L(this,function(t){switch(t.label){case 0:return this.connected?[2]:(this._injectElement(),[4,new Promise(function(t,n){e._connectHandler={resolve:t,reject:n}})]);case 1:return t.sent(),[2]}})})},n.prototype.disconnect=function(){return I(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return this._adapterInstance?[4,this._adapterInstance.disconnect()]:[2];case 1:return e.sent(),this._disconnected(),this.emit(`disconnect`),[2]}})})},n.prototype.signTransaction=function(t){return I(this,void 0,void 0,function(){var n,r;return L(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return n=N(t)?Uint8Array.from(t.serialize({verifySignatures:!1,requireAllSignatures:!1})):t.serialize(),[4,this._adapterInstance.signTransaction(n)];case 1:return r=i.sent(),[2,N(t)?s.from(r):e.deserialize(r)]}})})},n.prototype.signAllTransactions=function(t){return I(this,void 0,void 0,function(){var n,r;return L(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return n=t.map(function(e){return N(e)?Uint8Array.from(e.serialize({verifySignatures:!1,requireAllSignatures:!1})):e.serialize()}),[4,this._adapterInstance.signAllTransactions(n)];case 1:if(r=i.sent(),r.length!==t.length)throw Error(`Failed to sign all transactions`);return[2,r.map(function(n,r){return N(t[r])?s.from(n):e.deserialize(n)})]}})})},n.prototype.signAndSendTransaction=function(e,t){return I(this,void 0,void 0,function(){var n;return L(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return n=N(e)?e.serialize({verifySignatures:!1,requireAllSignatures:!1}):e.serialize(),[4,this._adapterInstance.signAndSendTransaction(n,t)];case 1:return[2,r.sent()]}})})},n.prototype.signMessage=function(e,t){return t===void 0&&(t=`utf8`),I(this,void 0,void 0,function(){return L(this,function(n){switch(n.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._adapterInstance.signMessage(e,t)];case 1:return[2,n.sent()]}})})},n.prototype.sign=function(e,t){return t===void 0&&(t=`utf8`),I(this,void 0,void 0,function(){return L(this,function(n){switch(n.label){case 0:return[4,this.signMessage(e,t)];case 1:return[2,n.sent()]}})})},n.prototype.detectWallet=function(e){return e===void 0&&(e=10),I(this,void 0,void 0,function(){return L(this,function(t){return window.SolflareApp||window.solflare?.isSolflare?[2,!0]:[2,new Promise(function(t){var n=setInterval(function(){(window.SolflareApp||window.solflare?.isSolflare)&&(clearInterval(n),clearTimeout(r),t(!0))},500),r=setTimeout(function(){clearInterval(n),t(!1)},e*1e3)})]})})},n.IFRAME_URL=`https://connect.solflare.com/`,n}(r);export{z as default};