import{Bn as e,E as t,Gn as n,In as r,Ln as i,Rn as a,U as o,Y as s,at as c,bt as l,wn as u}from"./index-CIipDqm0.js";import{t as d}from"./aucations-data-Gbz74KWw.js";import{t as f}from"./gumballs-data-CBFicVH1.js";import{t as p}from"./useClaimRafflePrize-DpyzHC4M.js";var m=n(e(),1);const h=e=>{let{id:n,raffle:r,prizeData:o,createdBy:d,ticketSupply:f,ticketSold:h=0,ticketPrice:g,ticketTokenAddress:_,ticketsBought:v,raffleEntries:y,className:b,isWinner:x,hasClaimed:S}=e;console.log(e),console.log(x,S);let C=f>0?(v/f*100).toFixed(1):0,w=v*g,T=f-h,{claimPrize:E}=p(),D=i(),{publicKey:O}=u();return(0,m.jsxs)(`div`,{className:`bg-transparent hover:bg-gray-1300 w-full transition duration-300 border border-gray-1100 rounded-2xl ${b}`,children:[(0,m.jsxs)(`div`,{className:`w-full flex gap-5 p-5 sm:flex-row flex-col`,children:[(0,m.jsx)(`img`,{src:o.image,alt:o.name,className:`object-cover w-[109px] h-[109px] rounded-lg`}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsxs)(`div`,{className:`flex w-full items-center justify-between`,children:[(0,m.jsx)(`h3`,{className:`xl:text-2xl text-xl text-black-1000 font-bold font-inter`,children:o.name}),(0,m.jsxs)(`div`,{className:`flex items-center `,children:[x&&(0,m.jsx)(s,{className:`w-full h-[40px] relative right-10 `,onclick:()=>{E.mutate({raffleId:Number(n)||0},{onSuccess:()=>{D.invalidateQueries({queryKey:[`profile-raffle-purchased`,O?.toBase58()||``]}),c.success(`Prize claimed successfully`)},onError:()=>{c.error(`Failed to claim prize`)}})},text:`Claim Prize`,disabled:S||E.isPending}),(0,m.jsx)(a,{to:`/raffles/$id`,params:{id:r||n?.toString()||``},className:`w-10 h-10 transition duration-300 hover:opacity-90 flex items-center justify-center text-white font-semibold font-inter bg-primary-color rounded-md`,children:(0,m.jsx)(`svg`,{width:20,height:20,viewBox:`0 0 20 20`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,m.jsx)(`path`,{d:`M7.5 4.16665L13.3333 9.99998L7.5 15.8333`,stroke:`#212121`,strokeWidth:`1.66667`,strokeLinecap:`round`,strokeLinejoin:`round`})})})]})]}),(0,m.jsxs)(`div`,{className:`w-full gap-6 flex justify-between mt-6 md:flex-row flex-col`,children:[(0,m.jsxs)(`div`,{className:`flex flex-col gap-1.5`,children:[o.verified&&(0,m.jsxs)(`div`,{className:`inline-flex gap-2.5 items-center`,children:[(0,m.jsx)(`p`,{className:`text-sm text-black-1000 font-semibold font-inter`,children:o.collection?t.find(e=>e.address===o.collection)?.name:`Verified Collection`}),(0,m.jsx)(`img`,{src:`/icons/verified-icon.svg`,alt:`verified`,className:`w-5 h-5`})]}),(0,m.jsxs)(`p`,{className:`text-sm font-medium text-primary-color font-inter`,children:[d.slice(0,6),`...`,d.slice(-4)]})]}),(0,m.jsx)(`p`,{className:`text-base mt-auto text-primary-color font-medium font-inter`,children:o.symbol})]})]})]}),(0,m.jsx)(`div`,{className:`border-t border-gray-1100`}),(0,m.jsxs)(`div`,{className:`w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-5 md:gap-20 p-5`,children:[(0,m.jsxs)(`div`,{children:[(0,m.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Tickets remaining`}),f===h?(0,m.jsx)(`h4`,{className:`text-base text-red-1000 font-semibold font-inter`,children:`SOLD OUT`}):(0,m.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[T,`/`,f]})]}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Price`}),(0,m.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[(0,m.jsx)(`span`,{children:g/10**(l.find(e=>e.address===_)?.decimals||0)}),` `,l.find(e=>e.address===_)?.symbol||`SOL`]})]}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Tickets Bought`}),(0,m.jsx)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:(0,m.jsx)(`span`,{children:v})})]}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Chance`}),(0,m.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[(0,m.jsx)(`span`,{children:C}),`% Chance`]})]}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Spent`}),(0,m.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[(0,m.jsx)(`span`,{children:w/10**(l.find(e=>e.address===_)?.decimals||0)}),` `,l.find(e=>e.address===_)?.symbol||`SOL`,` Spent`]})]})]})]})},g=()=>(0,m.jsxs)(`div`,{className:`w-full flex flex-col md:gap-7 gap-5 items-center justify-center py-20`,children:[(0,m.jsx)(`img`,{src:`/404-img.png`,className:`lg:w-[192px] w-[162px]`,alt:`404`}),(0,m.jsx)(`p`,{className:`lg:text-lg text-base font-inter font-semibold text-black-1000 text-center`,children:`No auctions created yet.`})]}),_=[{id:1,userName:`OzzyyySOL`,isFavorite:!0,ProfileLink:`#`,userAvatar:`/images/home/placeholder-user.png`,coins:268,tokenSymbol:`JUP`,MainImage:`/images/home/featured-card-img-1.png`,countdown:{hours:36,minutes:23,seconds:56},val:1.29,ttv:1.54,growthPercent:19.38,verified:!0,totalTickets:100,soldTickets:85,pricePerTicket:.0595,category:`rafflers`,rafflesType:`favourite`,sol:.5,title:`Mega Raffle`,TicketBought:5,ChancePercent:12.5},{id:2,userName:`OzzyyySOL`,isFavorite:!1,ProfileLink:`#`,userAvatar:`/images/home/placeholder-user.png`,coins:700,tokenSymbol:`JUP`,MainImage:`/images/home/featured-card-img-2.png`,countdown:{hours:36,minutes:23,seconds:56},val:1.29,ttv:1.54,growthPercent:19.38,verified:!0,totalTickets:100,soldTickets:85,pricePerTicket:.0595,category:`rafflers`,rafflesType:`created`,sol:.5,title:`Lucky Draw`,TicketBought:3,ChancePercent:7.5}];var v=({mainFilter:e,rafflerFilter:t})=>{let n=[],r=[],i=e=>{n.push(...e.filter(e=>e.rafflesType===`created`)),r.push(...e.filter(e=>e.rafflesType===`purchased`||e.rafflesType===`favourite`))};if((e===`rafflers`||e===`All`)&&i(o),(e===`gumballs`||e===`All`)&&i(f),(e===`auctions`||e===`All`)&&i(d),t)switch(t){case`created`:r=[];break;case`purchased`:n=[],r=[..._];break;case`favourite`:n=n.filter(e=>e.isFavorite),r=r.filter(e=>e.isFavorite);break;case`followed`:n=n.filter(e=>e.isFollowed),r=r.filter(e=>e.isFollowed);break}return{created:n,purchased:r}};const y=async({mainFilter:e,rafflerFilter:t,pageParam:n=1,pageSize:r=8})=>{let{created:i,purchased:a}=v({mainFilter:e,rafflerFilter:t}),o=(n-1)*r,s=n*r;return new Promise(e=>{setTimeout(()=>{e({created:i.slice(o,s),purchased:a.slice(o,s)})},500)})},b=(e,t,n=1,i=8)=>r({queryKey:[`creator-profile`,e,t,n],queryFn:()=>y({mainFilter:e,rafflerFilter:t,pageParam:n,pageSize:i}),staleTime:1e3*60*5});export{g as n,h as r,b as t};