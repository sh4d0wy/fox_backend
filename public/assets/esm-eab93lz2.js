import{An as e,Gn as t,Mn as n,Nn as r,Un as i,jn as a}from"./index-CHzPLsRX.js";var o=i(((e,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}));r();var s=t(o(),1).default,c=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),l=function(e){c(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(s),u=i(((e,t)=>{function n(e){if(e.length>=255)throw TypeError(`Alphabet too long`);for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),a=i.charCodeAt(0);if(t[a]!==255)throw TypeError(i+` is ambiguous`);t[a]=r}var o=e.length,s=e.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError(`Expected Uint8Array`);if(t.length===0)return``;for(var n=0,r=0,i=0,a=t.length;i!==a&&t[i]===0;)i++,n++;for(var c=(a-i)*l+1>>>0,u=new Uint8Array(c);i!==a;){for(var d=t[i],f=0,p=c-1;(d!==0||f<r)&&p!==-1;p--,f++)d+=256*u[p]>>>0,u[p]=d%o>>>0,d=d/o>>>0;if(d!==0)throw Error(`Non-zero carry`);r=f,i++}for(var m=c-r;m!==c&&u[m]===0;)m++;for(var h=s.repeat(n);m<c;++m)h+=e.charAt(u[m]);return h}function d(e){if(typeof e!=`string`)throw TypeError(`Expected String`);if(e.length===0)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===s;)r++,n++;for(var a=(e.length-n)*c+1>>>0,l=new Uint8Array(a);e[n];){var u=e.charCodeAt(n);if(u>255)return;var d=t[u];if(d===255)return;for(var f=0,p=a-1;(d!==0||f<i)&&p!==-1;p--,f++)d+=o*l[p]>>>0,l[p]=d%256>>>0,d=d/256>>>0;if(d!==0)throw Error(`Non-zero carry`);i=f,n++}for(var m=a-i;m!==a&&l[m]===0;)m++;for(var h=new Uint8Array(r+(a-m)),g=r;m!==a;)h[g++]=l[m++];return h}function f(e){var t=d(e);if(t)return t;throw Error(`Non-base`+o+` character`)}return{encode:u,decodeUnsafe:d,decode:f}}t.exports=n})),d=i(((e,t)=>{t.exports=u()(`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`)})),f=t(d()),p=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},h=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},g=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},_=function(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},v=function(t){p(n,t);function n(n,r){var i=t.call(this)||this;if(i._handleMessage=function(t){if(i._injectedProvider&&t.source===window||t.origin===i._providerUrl.origin&&t.source===i._popup){if(t.data.method===`connected`){var n=new e(t.data.params.publicKey);(!i._publicKey||!i._publicKey.equals(n))&&(i._publicKey&&!i._publicKey.equals(n)&&i._handleDisconnect(),i._publicKey=n,i._autoApprove=!!t.data.params.autoApprove,i.emit(`connect`,i._publicKey))}else if(t.data.method===`disconnected`)i._handleDisconnect();else if((t.data.result||t.data.error)&&i._responsePromises.has(t.data.id)){var r=_(i._responsePromises.get(t.data.id),2),a=r[0],o=r[1];t.data.result?a(t.data.result):o(Error(t.data.error))}}},i._handleConnect=function(){return i._handlerAdded||(i._handlerAdded=!0,window.addEventListener(`message`,i._handleMessage),window.addEventListener(`beforeunload`,i.disconnect)),i._injectedProvider?new Promise(function(e){i._sendRequest(`connect`,{}),e()}):(window.name=`parent`,i._popup=window.open(i._providerUrl.toString(),`_blank`,`location,resizable,width=460,height=675`),new Promise(function(e){i.once(`connect`,e)}))},i._handleDisconnect=function(){i._handlerAdded&&(i._handlerAdded=!1,window.removeEventListener(`message`,i._handleMessage),window.removeEventListener(`beforeunload`,i.disconnect)),i._publicKey&&(i._publicKey=null,i.emit(`disconnect`)),i._responsePromises.forEach(function(e,t){var n=_(e,2);n[0];var r=n[1];i._responsePromises.delete(t),r(`Wallet disconnected`)})},i._sendRequest=function(e,t){return h(i,void 0,void 0,function(){var n,r=this;return g(this,function(i){if(e!==`connect`&&!this.connected)throw Error(`Wallet not connected`);return n=this._nextRequestId,++this._nextRequestId,[2,new Promise(function(i,a){r._responsePromises.set(n,[i,a]),r._injectedProvider?r._injectedProvider.postMessage({jsonrpc:`2.0`,id:n,method:e,params:m({network:r._network},t)}):(r._popup.postMessage({jsonrpc:`2.0`,id:n,method:e,params:t},r._providerUrl.origin),r.autoApprove||r._popup.focus())})]})})},i.connect=function(){return i._popup&&i._popup.close(),i._handleConnect()},i.disconnect=function(){return h(i,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return this._injectedProvider?[4,this._sendRequest(`disconnect`,{})]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._popup&&this._popup.close(),this._handleDisconnect(),[2]}})})},i.sign=function(t,n){return h(i,void 0,void 0,function(){var r,i,a;return g(this,function(o){switch(o.label){case 0:if(!(t instanceof Uint8Array))throw Error(`Data must be an instance of Uint8Array`);return[4,this._sendRequest(`sign`,{data:t,display:n})];case 1:return r=o.sent(),i=f.default.decode(r.signature),a=new e(r.publicKey),[2,{signature:i,publicKey:a}]}})})},b(n))i._injectedProvider=n;else if(y(n))i._providerUrl=new URL(n),i._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:r}).toString();else throw Error(`provider parameter must be an injected provider or a URL string.`);return i._network=r,i._publicKey=null,i._autoApprove=!1,i._popup=null,i._handlerAdded=!1,i._nextRequestId=1,i._responsePromises=new Map,i}return Object.defineProperty(n.prototype,`publicKey`,{get:function(){return this._publicKey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,`connected`,{get:function(){return this._publicKey!==null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,`autoApprove`,{get:function(){return this._autoApprove},enumerable:!1,configurable:!0}),n}(s);function y(e){return typeof e==`string`}function b(e){return x(e)&&S(e.postMessage)}function x(e){return typeof e==`object`&&!!e}function S(e){return typeof e==`function`}var C=t(d()),w=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),T=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},E=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},D=function(e){w(t,e);function t(t,n,r){var i=e.call(this)||this;return i._instance=null,i.handleMessage=function(e){},i._sendRequest=function(e,t){return T(i,void 0,void 0,function(){return E(this,function(n){switch(n.label){case 0:return this._instance?.sendRequest?[4,this._instance.sendRequest(e,t)]:[3,2];case 1:return[2,n.sent()];case 2:return this._instance?._sendRequest?[4,this._instance._sendRequest(e,t)]:[3,4];case 3:return[2,n.sent()];case 4:throw Error("Unsupported version of `@project-serum/sol-wallet-adapter`")}})})},i._handleConnect=function(){i.emit(`connect`)},i._handleDisconnect=function(){window.clearInterval(i._pollTimer),i.emit(`disconnect`)},i._network=n,i._provider=r,i}return Object.defineProperty(t.prototype,`publicKey`,{get:function(){return this._instance.publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`connected`,{get:function(){return this._instance.connected||!1},enumerable:!1,configurable:!0}),t.prototype.connect=function(){return T(this,void 0,void 0,function(){var e=this;return E(this,function(t){switch(t.label){case 0:return this._instance=new v(this._provider,this._network),this._instance.on(`connect`,this._handleConnect),this._instance.on(`disconnect`,this._handleDisconnect),this._pollTimer=window.setInterval(function(){e._instance?._popup?.closed!==!1&&e._handleDisconnect()},200),[4,this._instance.connect()];case 1:return t.sent(),[2]}})})},t.prototype.disconnect=function(){return T(this,void 0,void 0,function(){return E(this,function(e){switch(e.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return this._instance.removeAllListeners(`connect`),this._instance.removeAllListeners(`disconnect`),[4,this._instance.disconnect()];case 1:return e.sent(),[2]}})})},t.prototype.signTransaction=function(e){return T(this,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._sendRequest(`signTransactionV2`,{transaction:C.default.encode(e)})];case 1:return t=n.sent().transaction,[2,C.default.decode(t)]}})})},t.prototype.signAllTransactions=function(e){return T(this,void 0,void 0,function(){var t;return E(this,function(n){switch(n.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._sendRequest(`signAllTransactionsV2`,{transactions:e.map(function(e){return C.default.encode(e)})})];case 1:return t=n.sent().transactions,[2,t.map(function(e){return C.default.decode(e)})]}})})},t.prototype.signAndSendTransaction=function(e,t){return T(this,void 0,void 0,function(){var n;return E(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._sendRequest(`signAndSendTransaction`,{transaction:C.default.encode(e),options:t})];case 1:return n=r.sent(),[2,n.signature]}})})},t.prototype.signMessage=function(e,t){return t===void 0&&(t=`hex`),T(this,void 0,void 0,function(){var n;return E(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._instance.sign(e,t)];case 1:return n=r.sent().signature,[2,Uint8Array.from(n)]}})})},t}(l),O,k=new Uint8Array(16);function A(){if(!O&&(O=typeof crypto<`u`&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw Error(`crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported`);return O(k)}var j=[];for(let e=0;e<256;++e)j.push((e+256).toString(16).slice(1));function M(e,t=0){return j[e[t+0]]+j[e[t+1]]+j[e[t+2]]+j[e[t+3]]+`-`+j[e[t+4]]+j[e[t+5]]+`-`+j[e[t+6]]+j[e[t+7]]+`-`+j[e[t+8]]+j[e[t+9]]+`-`+j[e[t+10]]+j[e[t+11]]+j[e[t+12]]+j[e[t+13]]+j[e[t+14]]+j[e[t+15]]}var N={randomUUID:typeof crypto<`u`&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function P(e,t,n){if(N.randomUUID&&!t&&!e)return N.randomUUID();e||={};let r=e.random||(e.rng||A)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n||=0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return M(r)}var F=P;r();var I=t(d()),L=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},R.apply(this,arguments)},z=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},B=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},V=function(t){L(n,t);function n(n,r){var i=this;return i=t.call(this)||this,i._publicKey=null,i._messageHandlers={},i.handleMessage=function(e){if(i._messageHandlers[e.id]){var t=i._messageHandlers[e.id],n=t.resolve,r=t.reject;delete i._messageHandlers[e.id],e.error?r(e.error):n(e.result)}},i._sendMessage=function(e){if(!i.connected)throw Error(`Wallet not connected`);return new Promise(function(t,n){var r,a=F();i._messageHandlers[a]={resolve:t,reject:n},(r=i._iframe?.contentWindow)==null||r.postMessage({channel:`solflareWalletAdapterToIframe`,data:R({id:a},e)},`*`)})},i._iframe=n,i._publicKey=new e((r?.toString)?.call(r)),i}return Object.defineProperty(n.prototype,`publicKey`,{get:function(){return this._publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,`connected`,{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.connect=function(){return z(this,void 0,void 0,function(){return B(this,function(e){return[2]})})},n.prototype.disconnect=function(){return z(this,void 0,void 0,function(){return B(this,function(e){switch(e.label){case 0:return[4,this._sendMessage({method:`disconnect`})];case 1:return e.sent(),[2]}})})},n.prototype.signTransaction=function(e){return z(this,void 0,void 0,function(){var t,n;return B(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._sendMessage({method:`signTransaction`,params:{transaction:I.default.encode(e)}})];case 2:return t=r.sent(),[2,I.default.decode(t)];case 3:throw n=r.sent(),Error((n?.toString)?.call(n)||`Failed to sign transaction`);case 4:return[2]}})})},n.prototype.signAllTransactions=function(e){return z(this,void 0,void 0,function(){var t,n;return B(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._sendMessage({method:`signAllTransactions`,params:{transactions:e.map(function(e){return I.default.encode(e)})}})];case 2:return t=r.sent(),[2,t.map(function(e){return I.default.decode(e)})];case 3:throw n=r.sent(),Error((n?.toString)?.call(n)||`Failed to sign transactions`);case 4:return[2]}})})},n.prototype.signAndSendTransaction=function(e,t){return z(this,void 0,void 0,function(){var n,r;return B(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._sendMessage({method:`signAndSendTransaction`,params:{transaction:I.default.encode(e),options:t}})];case 2:return n=i.sent(),[2,n];case 3:throw r=i.sent(),Error((r?.toString)?.call(r)||`Failed to sign and send transaction`);case 4:return[2]}})})},n.prototype.signMessage=function(e,t){return t===void 0&&(t=`hex`),z(this,void 0,void 0,function(){var n,r;return B(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._sendMessage({method:`signMessage`,params:{data:e,display:t}})];case 2:return n=i.sent(),[2,Uint8Array.from(I.default.decode(n))];case 3:throw r=i.sent(),Error((r?.toString)?.call(r)||`Failed to sign message`);case 4:return[2]}})})},n}(l);function H(e){return e.version===void 0}r();var U=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if(typeof n!=`function`&&n!==null)throw TypeError(`Class extends value `+String(n)+` is not a constructor or null`);e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),W=function(){return W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},W.apply(this,arguments)},G=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})},K=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},q=function(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)},J=function(e){U(t,e);function t(n){var r=e.call(this)||this;return r._network=`mainnet-beta`,r._provider=null,r._iframeParams={},r._adapterInstance=null,r._element=null,r._iframe=null,r._connectHandler=null,r._flutterHandlerInterval=null,r._handleEvent=function(e){switch(e.type){case`connect_native_web`:r._collapseIframe(),r._adapterInstance=new D(r._iframe,r._network,e.data?.provider||r._provider||`https://solflare.com/provider`),r._adapterInstance.on(`connect`,r._webConnected),r._adapterInstance.on(`disconnect`,r._webDisconnected),r._adapterInstance.connect(),r._setPreferredAdapter(`native_web`);return;case`connect`:r._collapseIframe(),r._adapterInstance=new V(r._iframe,e.data?.publicKey||``),r._adapterInstance.connect(),r._setPreferredAdapter(e.data?.adapter),r._connectHandler&&=(r._connectHandler.resolve(),null),r.emit(`connect`,r.publicKey);return;case`disconnect`:r._connectHandler&&=(r._connectHandler.reject(),null),r._disconnected(),r.emit(`disconnect`);return;case`accountChanged`:e.data?.publicKey?(r._adapterInstance=new V(r._iframe,e.data.publicKey),r._adapterInstance.connect(),r.emit(`accountChanged`,r.publicKey)):r.emit(`accountChanged`,void 0);return;case`collapse`:r._collapseIframe();return;default:return}},r._handleResize=function(e){e.resizeMode===`full`?e.params.mode===`fullscreen`?r._expandIframe():e.params.mode===`hide`&&r._collapseIframe():e.resizeMode===`coordinates`&&r._iframe&&(r._iframe.style.top=isFinite(e.params.top)?`${e.params.top}px`:``,r._iframe.style.bottom=isFinite(e.params.bottom)?`${e.params.bottom}px`:``,r._iframe.style.left=isFinite(e.params.left)?`${e.params.left}px`:``,r._iframe.style.right=isFinite(e.params.right)?`${e.params.right}px`:``,r._iframe.style.width=isFinite(e.params.width)?`${e.params.width}px`:e.params.width,r._iframe.style.height=isFinite(e.params.height)?`${e.params.height}px`:e.params.height)},r._handleMessage=function(e){if(e.data?.channel===`solflareIframeToWalletAdapter`){var t=e.data.data||{};t.type===`event`?r._handleEvent(t.event):t.type===`resize`?r._handleResize(t):t.type===`response`&&r._adapterInstance&&r._adapterInstance.handleMessage(t)}},r._removeElement=function(){r._flutterHandlerInterval!==null&&(clearInterval(r._flutterHandlerInterval),r._flutterHandlerInterval=null),r._element&&=(r._element.remove(),null)},r._removeDanglingElements=function(){var e,t,n=document.getElementsByClassName(`solflare-wallet-adapter-iframe`);try{for(var r=q(n),i=r.next();!i.done;i=r.next()){var a=i.value;a.parentElement&&a.remove()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},r._injectElement=function(){r._removeElement(),r._removeDanglingElements();var e=W(W({},r._iframeParams),{cluster:r._network||`mainnet-beta`,origin:window.location.origin||``,title:document.title||``,version:1,sdkVersion:`1.4.2`}),n=r._getPreferredAdapter();n&&(e.adapter=n),r._provider&&(e.provider=r._provider);var i=Object.keys(e).map(function(t){return`${t}=${encodeURIComponent(e[t])}`}).join(`&`),a=`${t.IFRAME_URL}?${i}`;r._element=document.createElement(`div`),r._element.className=`solflare-wallet-adapter-iframe`,r._element.innerHTML=`
      <iframe src='${a}' referrerPolicy='strict-origin-when-cross-origin' style='position: fixed; top: 0; bottom: 0; left: 0; right: 0; width: 100%; height: 100%; border: none; border-radius: 0; z-index: 99999; color-scheme: auto;' allowtransparency='true'></iframe>
    `,document.body.appendChild(r._element),r._iframe=r._element.querySelector(`iframe`),window.fromFlutter=r._handleMobileMessage,r._flutterHandlerInterval=setInterval(function(){window.fromFlutter=r._handleMobileMessage},100),window.addEventListener(`message`,r._handleMessage,!1)},r._collapseIframe=function(){r._iframe&&(r._iframe.style.top=``,r._iframe.style.right=``,r._iframe.style.height=`2px`,r._iframe.style.width=`2px`)},r._expandIframe=function(){r._iframe&&(r._iframe.style.top=`0px`,r._iframe.style.bottom=`0px`,r._iframe.style.left=`0px`,r._iframe.style.right=`0px`,r._iframe.style.width=`100%`,r._iframe.style.height=`100%`)},r._getPreferredAdapter=function(){return localStorage&&localStorage.getItem(`solflarePreferredWalletAdapter`)||null},r._setPreferredAdapter=function(e){localStorage&&e&&localStorage.setItem(`solflarePreferredWalletAdapter`,e)},r._clearPreferredAdapter=function(){localStorage&&localStorage.removeItem(`solflarePreferredWalletAdapter`)},r._webConnected=function(){r._connectHandler&&=(r._connectHandler.resolve(),null),r.emit(`connect`,r.publicKey)},r._webDisconnected=function(){r._connectHandler&&=(r._connectHandler.reject(),null),r._disconnected(),r.emit(`disconnect`)},r._disconnected=function(){window.removeEventListener(`message`,r._handleMessage,!1),r._removeElement(),r._clearPreferredAdapter(),r._adapterInstance=null},r._handleMobileMessage=function(e){var t;(t=r._iframe?.contentWindow)==null||t.postMessage({channel:`solflareMobileToIframe`,data:e},`*`)},n?.network&&(r._network=n?.network),n?.provider&&(r._provider=n?.provider),n?.params&&(r._iframeParams=W({},n?.params)),r}return Object.defineProperty(t.prototype,`publicKey`,{get:function(){return this._adapterInstance?.publicKey||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`isConnected`,{get:function(){return!!this._adapterInstance?.connected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`connected`,{get:function(){return this.isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,`autoApprove`,{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.connect=function(){return G(this,void 0,void 0,function(){var e=this;return K(this,function(t){switch(t.label){case 0:return this.connected?[2]:(this._injectElement(),[4,new Promise(function(t,n){e._connectHandler={resolve:t,reject:n}})]);case 1:return t.sent(),[2]}})})},t.prototype.disconnect=function(){return G(this,void 0,void 0,function(){return K(this,function(e){switch(e.label){case 0:return this._adapterInstance?[4,this._adapterInstance.disconnect()]:[2];case 1:return e.sent(),this._disconnected(),this.emit(`disconnect`),[2]}})})},t.prototype.signTransaction=function(e){return G(this,void 0,void 0,function(){var t,r;return K(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return t=H(e)?Uint8Array.from(e.serialize({verifySignatures:!1,requireAllSignatures:!1})):e.serialize(),[4,this._adapterInstance.signTransaction(t)];case 1:return r=i.sent(),[2,H(e)?a.from(r):n.deserialize(r)]}})})},t.prototype.signAllTransactions=function(e){return G(this,void 0,void 0,function(){var t,r;return K(this,function(i){switch(i.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return t=e.map(function(e){return H(e)?Uint8Array.from(e.serialize({verifySignatures:!1,requireAllSignatures:!1})):e.serialize()}),[4,this._adapterInstance.signAllTransactions(t)];case 1:if(r=i.sent(),r.length!==e.length)throw Error(`Failed to sign all transactions`);return[2,r.map(function(t,r){return H(e[r])?a.from(t):n.deserialize(t)})]}})})},t.prototype.signAndSendTransaction=function(e,t){return G(this,void 0,void 0,function(){var n;return K(this,function(r){switch(r.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return n=H(e)?e.serialize({verifySignatures:!1,requireAllSignatures:!1}):e.serialize(),[4,this._adapterInstance.signAndSendTransaction(n,t)];case 1:return[2,r.sent()]}})})},t.prototype.signMessage=function(e,t){return t===void 0&&(t=`utf8`),G(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:if(!this.connected)throw Error(`Wallet not connected`);return[4,this._adapterInstance.signMessage(e,t)];case 1:return[2,n.sent()]}})})},t.prototype.sign=function(e,t){return t===void 0&&(t=`utf8`),G(this,void 0,void 0,function(){return K(this,function(n){switch(n.label){case 0:return[4,this.signMessage(e,t)];case 1:return[2,n.sent()]}})})},t.prototype.detectWallet=function(e){return e===void 0&&(e=10),G(this,void 0,void 0,function(){return K(this,function(t){return window.SolflareApp||window.solflare?.isSolflare?[2,!0]:[2,new Promise(function(t){var n=setInterval(function(){(window.SolflareApp||window.solflare?.isSolflare)&&(clearInterval(n),clearTimeout(r),t(!0))},500),r=setTimeout(function(){clearInterval(n),t(!1)},e*1e3)})]})})},t.IFRAME_URL=`https://connect.solflare.com/`,t}(s);export{J as default};