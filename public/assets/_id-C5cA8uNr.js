import{t as e}from"./disclosure-CCEJrzyd.js";import{t}from"./loader-GHUuBQKY.js";import{Bn as n,Dn as r,Dt as i,Gn as a,H as o,Hn as s,Jn as c,Mn as l,Pn as u,Rn as d,U as f,Un as p,Y as m,_t as h,at as g,b as _,bt as v,ct as y,ht as b,it as x,j as S,kt as C,nt as ee,ot as w,pt as T,rn as E,rt as D,st as O,tt as k,ut as A,xn as j,xt as M,y as N,z as P}from"./index-CBs22Nnx.js";import{t as F}from"./useClaimRafflePrize-D7P4gaxE.js";var I=h(`trophy`,[[`path`,{d:`M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978`,key:`1n3hpd`}],[`path`,{d:`M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978`,key:`rfe1zi`}],[`path`,{d:`M18 9h1.5a1 1 0 0 0 0-5H18`,key:`7xy6bh`}],[`path`,{d:`M4 22h16`,key:`57wxv0`}],[`path`,{d:`M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z`,key:`1mhfuq`}],[`path`,{d:`M6 9H4.5a1 1 0 0 1 0-5H6`,key:`tex48p`}]]),L=h(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),R=c(a(),1),z=c(p(),1);const te=({participants:e,isLoading:t=!1,ticketSupply:n})=>(console.log(`participants`,e),(0,z.jsx)(`div`,{className:`border border-gray-1100 md:pb-36 pb-24 rounded-[20px] w-full md:overflow-hidden overflow-x-auto`,children:(0,z.jsxs)(`table`,{className:`table w-full min-w-[600px]`,children:[(0,z.jsx)(`thead`,{className:`bg-gray-1300`,children:(0,z.jsxs)(`tr`,{className:`flex-1`,children:[(0,z.jsx)(`th`,{className:`text-base md:w-1/3 text-start font-inter text-gray-1600 font-medium md:px-10 px-4 py-7`,children:`User`}),(0,z.jsx)(`th`,{className:`text-base md:w-1/5 text-start font-inter text-gray-1600 font-medium`,children:(0,z.jsx)(`div`,{className:`px-5 h-6 border-l border-gray-1600`,children:`Tickets bought`})}),(0,z.jsx)(`th`,{className:`text-base md:w-1/5 text-start font-inter text-gray-1600 font-medium`,children:(0,z.jsx)(`div`,{className:`px-5 h-6 border-l border-gray-1600`,children:`Current chance`})})]})}),(0,z.jsx)(`tbody`,{children:t?[,,,].fill(0).map((e,t)=>(0,z.jsxs)(`tr`,{className:`flex-1 animate-pulse`,children:[(0,z.jsx)(`td`,{children:(0,z.jsxs)(`div`,{className:`md:px-10 px-4 py-4 border-b border-gray-1100 flex items-center gap-2.5`,children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-gray-300`}),(0,z.jsx)(`div`,{className:`h-4 w-24 bg-gray-300 rounded`})]})}),(0,z.jsx)(`td`,{children:(0,z.jsx)(`div`,{className:`px-5 py-6 border-b border-gray-1100`,children:(0,z.jsx)(`div`,{className:`h-4 w-6 bg-gray-300 rounded`})})}),(0,z.jsx)(`td`,{children:(0,z.jsx)(`div`,{className:`px-5 py-6 border-b border-gray-1100`,children:(0,z.jsx)(`div`,{className:`h-4 w-6 bg-gray-300 rounded`})})}),(0,z.jsx)(`td`,{children:(0,z.jsx)(`div`,{className:`px-5 py-6 border-b border-gray-1100`,children:(0,z.jsx)(`div`,{className:`h-4 w-12 bg-gray-300 rounded`})})})]},t)):e?.map(e=>(0,z.jsxs)(`tr`,{className:`flex-1`,children:[(0,z.jsx)(`td`,{children:(0,z.jsxs)(`div`,{className:`md:px-10 px-4 flex items-center gap-2.5 py-4 border-b border-gray-1100`,children:[(0,z.jsx)(`img`,{src:e.user.profileImage?j+e.user.profileImage:`/icons/user-avatar.png`,className:`w-10 h-10 rounded-full object-cover`,alt:`user`}),(0,z.jsxs)(`p`,{className:`text-base text-black-1000 font-medium font-inter`,children:[e.userAddress.slice(0,6),`...`,e.userAddress.slice(-4)]})]})}),(0,z.jsx)(`td`,{children:(0,z.jsx)(`div`,{className:`px-5 py-6 border-b border-gray-1100`,children:(0,z.jsx)(`p`,{className:`text-base text-black-1000 font-medium font-inter`,children:e.quantity})})}),(0,z.jsx)(`td`,{children:(0,z.jsx)(`div`,{className:`px-5 py-6 border-b border-gray-1100`,children:(0,z.jsxs)(`p`,{className:`text-base text-black-1000 font-medium font-inter`,children:[(e.quantity/n*100).toFixed(2),`%`]})})})]},e.id))})]})})),ne=()=>{let{getRaffleConfig:e}=P(),{data:t,isLoading:n,isError:r}=e,{supply:i}=g();return(0,R.useMemo)(()=>n||r?0:t?.creationFeeLamports.toNumber()??0,[t,n,r]),(0,R.useMemo)(()=>i?`${Math.ceil((100+(parseInt(i)-1))/parseInt(i))}%`:`1%`,[i,t]),(0,z.jsxs)(`div`,{className:`border border-gray-1100 rounded-[20px] py-[26px] md:px-6 px-4 md:pb-44 pb-20`,children:[(0,z.jsx)(`h3`,{className:`text-xl font-bold font-inter text-primary-color mb-[26px]`,children:`Terms & Conditions`}),(0,z.jsxs)(`ul`,{className:`list-decimal pl-6 lg:pr-10 pr-6`,children:[(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`1.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`A Raffle is a blockchain-based random draw service. All results are finalized based on on-chain transactions and are irreversible.`})]}),(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`2.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`Raffle tickets are final upon purchase and cannot be canceled or refunded. Tickets are non-refundable even if the participant does not win.`})]}),(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`3.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`Winners are determined after the raffle ends, in accordance with smart contract logic and/or platform rules. Rewards are distributed based on on-chain status, and display delays do not affect validity.`})]}),(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`4.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`The creator bears full responsibility for having lawful ownership and distribution rights to all NFTs or reward assets registered in the raffle.`})]}),(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`5.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`Assets registered for a raffle are held in escrow until the raffle ends. After completion, assets may be claimed by the winner or the creator according to the predefined conditions.`})]}),(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`6.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`Once a raffle is created, ticket quantity, pricing, duration, and conditions cannot be modified. All consequences resulting from configuration errors are solely the responsibility of the creator.`})]}),(0,z.jsxs)(`li`,{className:`flex items-start gap-1.5`,children:[(0,z.jsx)(`span`,{className:`flex items-start justify-end text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%]  w-6`,children:`7.`}),(0,z.jsx)(`p`,{className:`flex-1 w-full text-black-1000 font-medium font-inter text-sm md:text-base leading-[160%] break-words`,children:`Raffle proceeds are distributed automatically via smart contracts or platform logic. Creators may not dispute or reverse settlement results.`})]})]})]})};function re({max:e}){let t=e,{ticketQuantity:n,setTicketQuantity:r}=D();return(0,z.jsxs)(`div`,{className:`w-full`,children:[(0,z.jsxs)(`div`,{className:`w-full flex items-center justify-between`,children:[(0,z.jsx)(`h4`,{className:`text-sm text-gray-1200 font-medium font-inter`,children:`Quantity`}),(0,z.jsxs)(`h4`,{className:`text-sm text-black-1000 font-medium font-inter`,children:[`Max : `,t]})]}),(0,z.jsxs)(`div`,{className:`w-full my-5 flex items-center justify-between rounded-[14px] p-[13px] border border-gray-1100`,children:[(0,z.jsx)(`button`,{onClick:()=>{r(n>1?n-1:1)},className:`w-8 h-8 cursor-pointer rounded bg-primary-color flex items-center justify-center`,children:(0,z.jsx)(`img`,{src:`/icons/min-icon.svg`,alt:``})}),(0,z.jsx)(`input`,{type:`number`,value:n,onChange:e=>{let n=Number(e.target.value);if(!n)return r(0);if(n>t)return r(t);if(n<1)return r(1);r(n)},className:`rounded-[14px] outline-none font-medium text-base text-black-1000 text-center w-16`}),(0,z.jsx)(`button`,{onClick:()=>{r(n<t?n+1:t)},className:`w-8 h-8 cursor-pointer rounded bg-primary-color flex items-center justify-center`,children:(0,z.jsx)(`img`,{src:`/icons/plus-white-icon.svg`,alt:``})})]}),(0,z.jsx)(`button`,{onClick:()=>{r(t)},className:`bg-gray-1300 rounded-lg px-6 py-2 font-semibold text-center cursor-pointer`,children:`Max`})]})}u();const ie=()=>{let e=s(),t=n(),{publicKey:i,sendTransaction:a}=r(),{checkAndInvalidateToken:o}=E(),c=async e=>{try{if(!i)throw Error(`Wallet not connected`);if(!await o(i.toBase58()))throw Error(`Signature verification failed`);if(!e)throw Error(`Raffle ID is required`);return!0}catch(e){return e instanceof Error?w.error(e.message):w.error(`Something went wrong`),!1}};return{cancelRaffle:d({mutationKey:[`cancelRaffle`],mutationFn:async e=>{if(!await c(e))throw Error(`Validation failed`);let{base64Transaction:t,minContextSlot:n,blockhash:r,lastValidBlockHeight:i}=await T(e.toString());console.log(`Received transaction from backend`,t);let o=Buffer.from(t,`base64`),s=await a(l.from(o),v,{minContextSlot:n});if((await v.confirmTransaction({blockhash:r,lastValidBlockHeight:i,signature:s})).value.err)throw Error(`Failed to cancel auction`);let u=await O(e.toString(),s);if(u.error)throw Error(u.error);return e},onSuccess:n=>{t.invalidateQueries({queryKey:[`raffle`,n.toString()]}),t.invalidateQueries({queryKey:[`raffles`,`All Raffles`]}),w.success(`Raffle cancelled successfully`),e.navigate({to:`/raffles`})},onError:e=>{console.error(`Raffle cancelled failed:`,e),e.message!==`Validation failed`&&w.error(`Raffle cancelled failed`)}})}};u();const B=()=>{let e=n(),{publicKey:t,sendTransaction:i}=r(),{checkAndInvalidateToken:a}=E(),o=async e=>{try{if(!t)throw Error(`Wallet not connected`);if(!await a(t.toBase58()))throw Error(`Signature verification failed`);if(!e)throw Error(`Raffle ID is required`);return!0}catch(e){return e instanceof Error?w.error(e.message):w.error(`Something went wrong`),!1}};return{claimTicket:d({mutationFn:async e=>{if(!await o(e))throw Error(`Validation failed`);let{base64Transaction:t,minContextSlot:n,blockhash:r,lastValidBlockHeight:a}=await y(e.toString());console.log(`Received transaction from backend`,t);let s=Buffer.from(t,`base64`),c=await i(l.from(s),v,{minContextSlot:n});if((await v.confirmTransaction({blockhash:r,lastValidBlockHeight:a,signature:c})).value.err)throw Error(`Failed to claim ticket amount`);let u=await A(e,c);if(u.error)throw Error(u.error);return e},onSuccess:t=>{e.invalidateQueries({queryKey:[`raffle`,t.toString()]}),w.success(`Ticket amount claimed successfully`)},onError:e=>{console.error(e),e.message!==`Validation failed`&&w.error(`Failed to claim ticket amount`)}})}};var V=[{title:`Traits`,items:[{label:`Background`,value:`Vanilla Ice`},{label:`Fur`,value:`Hazel`},{label:`Face`,value:`Smirk`},{label:`Clothes`,value:`Baseball Hoodie`},{label:`Head`,value:`Beanie (blackout)`},{label:`Eyewear`,value:`Melrose Bricks`},{label:`1/1`,value:`None`}]},{title:`Details`,items:[{label:`Background`,value:`Vanilla Ice`},{label:`Fur`,value:`Hazel`},{label:`Face`,value:`Smirk`},{label:`Clothes`,value:`Baseball Hoodie`},{label:`Head`,value:`Beanie (blackout)`},{label:`Eyewear`,value:`Melrose Bricks`},{label:`1/1`,value:`None`}]}];function H(){let{id:n}=_.useParams(),{data:a,isLoading:c}=o(n||``),{publicKey:l}=r(),{buyTicket:u}=x(),{ticketQuantity:d}=D(),{cancelRaffle:p}=ie(),{claimPrize:h}=F(),{claimTicket:v}=B(),[y,w]=(0,R.useState)(!1),T=`/icons/user-avatar.png`,{data:E}=f(n||``),[O,A]=(0,R.useState)(!1),[P,H]=(0,R.useState)(!1),[U,W]=(0,R.useState)(!1),{showTicketBuyingPopup:G,setShowTicketBuyingPopup:K,ticketBuyingPopupDismissed:q,setTicketBuyingPopupDismissed:J}=g(),[Y,X]=(0,R.useState)([{name:`Participants`,active:!0},{name:`Transactions`,active:!1},{name:`Terms & Conditions`,active:!1}]),ae=s(),{favouriteRaffle:oe}=ee(l?.toString()||``),{getFavouriteRaffle:se}=k(l?.toString()||``),Z=(0,R.useMemo)(()=>p.isPending||a?.ticketSold&&a?.ticketSold>0||a?.state?.toLowerCase()!==`active`&&a?.state?.toLowerCase()!==`failedended`,[a?.ticketSold,a?.state,p.isPending]),ce=(0,R.useMemo)(()=>a?.state?.toLowerCase()===`successended`,[a?.ticketAmountClaimedByCreator,a?.state]),le=(0,R.useMemo)(()=>a?.state!==`SuccessEnded`&&a?.state!==`FailedEnded`,[a?.state]),ue=(0,R.useMemo)(()=>a?(console.log(`maxTickets`,a?.maxEntries,a?.ticketSupply,a?.ticketSold),Math.min(a?.maxEntries,a?.ticketSupply-a?.ticketSold)):0,[a]),Q=(0,R.useMemo)(()=>(a?.raffleEntries?.filter(e=>e.userAddress===l?.toString())[0]?.quantity??0)==a?.maxEntries?(w(!0),!0):!!(a?.ticketSold&&a?.ticketSold==a?.ticketSupply||a?.state?.toLowerCase()===`successended`),[a?.state,a?.maxEntries,a?.ticketSupply,a?.ticketSold]);console.log(`isBuyTicketDisabled`,Q);let $=(0,R.useMemo)(()=>{if(!a||a.state?.toLowerCase()!==`active`)return!1;let e=a.ticketSold!==void 0&&a.ticketSupply!==void 0&&a.ticketSold>=a.ticketSupply,t=a.endsAt?new Date(a.endsAt).getTime()<=Date.now():!1;return e||t},[a?.state,a?.ticketSold,a?.ticketSupply,a?.endsAt]);return(0,R.useEffect)(()=>{if($&&!U){H(!0);let e=setTimeout(()=>{H(!1),W(!0)},5e3);return()=>clearTimeout(e)}},[$,U]),(0,R.useEffect)(()=>{if(G&&!q){let e=setTimeout(()=>{K(!1),J(!0)},5e3);return()=>clearTimeout(e)}},[G,q]),console.log(E),c?(0,z.jsx)(`main`,{className:`py-20 text-center text-3xl font-bold text-red-500 w-full flex items-center justify-center`,children:(0,z.jsx)(t,{className:`w-15 h-15 animate-spin text-primary-color`})}):a?(console.log(`raffle`,a),(0,z.jsxs)(`main`,{children:[(0,z.jsx)(`div`,{className:`w-full py-5 md:py-10 max-w-[1440px] px-5 mx-auto`,children:(0,z.jsxs)(`button`,{onClick:()=>ae.history.go(-1),className:`px-6  cursor-pointer transition duration-300 hover:opacity-80 inline-flex items-center gap-2 py-2.5 bg-gray-1400 rounded-full text-base font-semibold text-black-1000`,children:[(0,z.jsx)(`img`,{src:`/icons/back-arw.svg`,alt:``}),`Back`]})}),(0,z.jsx)(`section`,{className:`w-full pb-20`,children:(0,z.jsx)(`div`,{className:`w-full py-5 md:py-10 max-w-[1440px] px-5 mx-auto`,children:(0,z.jsxs)(`div`,{className:`w-full flex gap-6 md:gap-10 xl:flex-row flex-col`,children:[(0,z.jsxs)(`div`,{className:`flex-1 max-w-full xl:max-w-[450px]`,children:[(0,z.jsx)(`img`,{src:a?.prizeData.image,className:`w-full md:h-[450px] h-[361px] object-cover rounded-[24px]`}),a.prizeData.type===`NFT`?(0,z.jsxs)(`div`,{className:`w-full pb-7 pt-6 md:py-10 hidden md:flex items-center justify-between`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3 2xl:gap-5`,children:[(0,z.jsx)(`img`,{src:S.find(e=>e.address===a?.prizeData.collection)?.image,className:`w-12 h-12 rounded-full object-cover`,alt:``}),(0,z.jsx)(`h3`,{className:`md:text-[28px] text-lg font-bold text-black-1000 font-inter`,children:S.find(e=>e.address===a?.prizeData.collection)?.name})]}),(0,z.jsxs)(`ul`,{className:`flex items-center gap-6`,children:[(0,z.jsx)(`li`,{children:(0,z.jsx)(`a`,{href:S.find(e=>e.address===a?.prizeData.collection)?.twitter,children:(0,z.jsx)(`img`,{src:`/icons/twitter-icon.svg`,className:`w-7 h-7 object-contain`,alt:``})})}),(0,z.jsx)(`li`,{children:(0,z.jsxs)(`a`,{href:S.find(e=>e.address===a?.prizeData.collection)?.website,children:[` `,(0,z.jsx)(`img`,{src:`/icons/mcp-server-icon.svg`,className:`w-7 h-7 object-contain`,alt:``})]})})]})]}):(0,z.jsx)(z.Fragment,{}),(0,z.jsx)(`div`,{className:`w-full space-y-5 hidden md:block`,children:a.prizeData.type===`NFT`?V.map((t,n)=>(0,z.jsx)(e,{as:`div`,defaultOpen:n===0,className:`w-full py-4 md:py-6 px-5 border border-gray-1100 rounded-[20px]`,children:({open:n})=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(e.Button,{className:`flex items-center justify-between w-full text-base md:text-xl font-bold font-inter text-black-1000 ${n?`text-primary-color`:``}`,children:[(0,z.jsx)(`span`,{children:t.title}),(0,z.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:16,height:9,viewBox:`0 0 16 9`,fill:`none`,className:`${n?`rotate-180`:``} transition-transform`,children:(0,z.jsx)(`path`,{d:`M15 1L8 8L1 1`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`})})]}),(0,z.jsx)(e.Panel,{className:`w-full`,children:(0,z.jsx)(`ul`,{className:`space-y-6 pt-6`,children:t.items.map(e=>(0,z.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,z.jsx)(`p`,{className:`md:text-base text-sm font-inter font-medium text-gray-1200`,children:e.label}),(0,z.jsx)(`p`,{className:`md:text-base text-sm font-inter font-medium text-black-1000`,children:e.value})]},e.label))})})]})},t.title)):(0,z.jsx)(z.Fragment,{})})]}),(0,z.jsx)(`div`,{className:`flex-1`,children:(0,z.jsxs)(`div`,{className:`w-full`,children:[(0,z.jsxs)(`h4`,{className:`text-sm text-primary-color font-inter font-medium`,children:[`Raffle prize â€¢ `,a?.numberOfWinners,` winners`]}),(0,z.jsx)(`h1`,{className:`md:text-[28px] text-xl font-inter md:mt-6 my-5 md:mb-5 font-bold text-black-100`,children:a?.prizeData.symbol}),(0,z.jsxs)(`div`,{className:`flex items-start md:items-center md:flex-row flex-col md:gap-0 gap-5 justify-between pb-6 md:pb-8 border-b border-gray-1100`,children:[(0,z.jsxs)(`ul`,{className:`flex items-center gap-3 2xl:gap-5 flex-wrap`,children:[(0,z.jsx)(`li`,{children:(0,z.jsxs)(`p`,{className:`md:text-sm text-xs inline-block px-2 sm:px-2.5 py-2 md:py-1.5 font-semibold text-center font-inter text-white bg-primary-color rounded-lg`,children:[a?.prizeData?.type===`NFT`?`Floor Price: `:`Prize Value: `,(a?.prizeData?.amount??0)/10**(a?.prizeData?.decimals||0),` `,` `,a?.prizeData?.type===`NFT`?(0,z.jsx)(`span`,{children:`SOL`}):(0,z.jsx)(`span`,{children:a?.prizeData?.symbol})]})}),(0,z.jsx)(`li`,{children:(0,z.jsxs)(`p`,{className:`md:text-sm text-xs inline-block px-2 sm:px-2.5 py-2 md:py-1.5 font-semibold text-center font-inter bg-black/60 text-white rounded-lg`,children:[`TTV: `,a?.ttv]})}),(0,z.jsx)(`li`,{children:(0,z.jsx)(`p`,{className:`md:text-sm text-xs inline-block px-2 sm:px-2.5 py-2 md:py-1.5 font-semibold text-center font-inter bg-black/60 text-white rounded-lg`,children:a?.roi>0?`+${a?.roi}%`:`${a?.roi}%`})})]}),(0,z.jsxs)(`ul`,{className:`flex items-center gap-4 md:gap-3 2xl:gap-5`,children:[(0,z.jsx)(`li`,{children:(0,z.jsxs)(`button`,{onClick:()=>{oe.mutate({raffleId:a?.id||0})},className:`border hover:bg-primary-color hover:border-primary-color transition duration-300 cursor-pointer px-5 py-[7px] md:py-2.5 gap-2.5 border-black-1000 rounded-full text-sm md:text-base font-semibold font-inter text-black-1000 inline-flex items-center justify-center ${se.data?.some(e=>e.id===a?.id)?`bg-primary-color text-white`:``}`,children:[(0,z.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`#212121`,children:(0,z.jsx)(`path`,{d:`M12 5.50066L11.4596 6.02076C11.601 6.16766 11.7961 6.25066 12 6.25066C12.2039 6.25066 12.399 6.16766 12.5404 6.02076L12 5.50066ZM9.42605 18.3219C7.91039 17.1271 6.25307 15.9603 4.93829 14.4798C3.64922 13.0282 2.75 11.3345 2.75 9.13713H1.25C1.25 11.8026 2.3605 13.8361 3.81672 15.4758C5.24723 17.0866 7.07077 18.3752 8.49742 19.4999L9.42605 18.3219ZM2.75 9.13713C2.75 6.98626 3.96537 5.18255 5.62436 4.42422C7.23607 3.68751 9.40166 3.88261 11.4596 6.02076L12.5404 4.98056C10.0985 2.44355 7.26409 2.02542 5.00076 3.05999C2.78471 4.07295 1.25 6.42506 1.25 9.13713H2.75ZM8.49742 19.4999C9.00965 19.9037 9.55954 20.3343 10.1168 20.6599C10.6739 20.9854 11.3096 21.25 12 21.25V19.75C11.6904 19.75 11.3261 19.6293 10.8736 19.3648C10.4213 19.1005 9.95208 18.7366 9.42605 18.3219L8.49742 19.4999ZM15.5026 19.4999C16.9292 18.3752 18.7528 17.0866 20.1833 15.4758C21.6395 13.8361 22.75 11.8026 22.75 9.13713H21.25C21.25 11.3345 20.3508 13.0282 19.0617 14.4798C17.7469 15.9603 16.0896 17.1271 14.574 18.3219L15.5026 19.4999ZM22.75 9.13713C22.75 6.42506 21.2153 4.07295 18.9992 3.05999C16.7359 2.02542 13.9015 2.44355 11.4596 4.98056L12.5404 6.02076C14.5983 3.88261 16.7639 3.68751 18.3756 4.42422C20.0346 5.18255 21.25 6.98626 21.25 9.13713H22.75ZM14.574 18.3219C14.0479 18.7366 13.5787 19.1005 13.1264 19.3648C12.6739 19.6293 12.3096 19.75 12 19.75V21.25C12.6904 21.25 13.3261 20.9854 13.8832 20.6599C14.4405 20.3343 14.9903 19.9037 15.5026 19.4999L14.574 18.3219Z`,fill:`#212121`})}),`Favourite`]})}),(0,z.jsx)(`li`,{})]})]}),(0,z.jsxs)(`div`,{className:`w-full`,children:[(0,z.jsx)(`div`,{className:`w-full flex items-center justify-between md:pt-7 py-6 md:pb-10`,children:(0,z.jsxs)(`div`,{className:`inline-flex gap-4`,children:[(0,z.jsx)(`img`,{src:a?.creator?.profileImage?`${j}${a?.creator?.profileImage}`:T,className:`w-10 h-10 rounded-full object-cover`,alt:`no`}),(0,z.jsxs)(`div`,{className:``,children:[(0,z.jsx)(`p`,{className:`text-xs md:pb-0 pb-1 font-inter font-normal text-gray-1200`,children:`Raffler`}),(0,z.jsxs)(`h4`,{className:`text-base text-black-1000 font-inter font-semibold`,children:[a?.createdBy.slice(0,6),`...`,a?.createdBy.slice(-4)]})]})]})}),le?(0,z.jsxs)(`div`,{className:`w-full flex items-center flex-col-reverse md:flex-row justify-between py-[22px] px-[26px] border border-gray-1100 rounded-[20px] bg-gray-1300`,children:[(0,z.jsxs)(`div`,{className:`inline-flex w-full md:w-fit flex-col gap-2.5`,children:[(0,z.jsx)(b,{endsAt:a?.endsAt,status:a?.state?.toLowerCase()===`active`?`ACTIVE`:`ENDED`}),(0,z.jsx)(`p`,{className:`text-sm font-inter text-gray-1200 font-normal`,children:`Time Left`})]}),(0,z.jsxs)(`div`,{className:`flex-1 md:flex-none md:w-1/2 flex justify-between w-full pb-6 md:pb-0`,children:[(0,z.jsxs)(`div`,{className:`inline-flex flex-col gap-2.5`,children:[(0,z.jsxs)(`h3`,{className:`md:text-xl font-semibold font-inter text-black-1000`,children:[a?.ticketSold,` / `,a?.ticketSupply]}),(0,z.jsx)(`p`,{className:`font-inter text-gray-1200 text-sm font-normal`,children:`Tickets Sold`})]}),(0,z.jsxs)(`div`,{className:`inline-flex flex-col gap-2.5`,children:[(0,z.jsxs)(`h3`,{className:`md:text-xl text-base font-semibold font-inter text-black-1000`,children:[a?.ticketPrice/10**(M.find(e=>e.address===a?.ticketTokenAddress)?.decimals||0),` `,M.find(e=>e.address===a?.ticketTokenAddress)?.symbol]}),(0,z.jsx)(`p`,{className:`font-inter text-gray-1200 text-sm font-normal`,children:`Ticket price`})]})]})]}):(0,z.jsx)(`div`,{className:`w-full flex flex-col md:gap-10 gap-6 sm:py-[22px] pt-5 pb-4 px-4 sm:px-[26px] border border-gray-1100 rounded-[20px] bg-gray-1300`,children:(0,z.jsxs)(`div`,{className:`w-full flex items-center justify-between p-2 rounded-[10px] bg-primary-color`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-5`,children:[(0,z.jsx)(`div`,{className:`md:w-[68px] w-12 h-12 md:h-[68px] rounded-lg bg-gray-1300 flex items-center justify-center`,children:(0,z.jsx)(`img`,{src:`/icons/crown_svg.svg`,alt:`svg`,className:`md:h-auto h-7`})}),a.winners&&a?.winners?.length>1?(0,z.jsxs)(`button`,{className:`text-white font-semibold font-inter underline underline-offset-2 hover:opacity-80 transition-opacity`,onClick:()=>{A(!0)},children:[`View all `,a.winners.length,` winners`]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(`h3`,{className:`md:text-2xl sm:text-xl text-base text-white font-semibold font-inter`,children:[a?.winners?.[0]?.walletAddress.slice(0,6),`...`,a?.winners?.[0]?.walletAddress.slice(-4)]}),(0,z.jsxs)(`h4`,{className:`text-base text-white font-semibold font-inter`,children:[`Won with`,` `,a.raffleEntries?.find(e=>e.userAddress===a?.winners?.[0]?.walletAddress)?.quantity,` `,`Ticket(s)`]})]})]}),a?.winners?.length>0&&a.winners?.some(e=>e.walletAddress===l?.toBase58())?(0,z.jsx)(m,{className:`w-[40%] h-[54px]`,onclick:()=>{h.mutate({raffleId:Number(a?.id)||0})},text:`Claim Prize`,disabled:(E&&E?.some(e=>e.sender===l?.toBase58()))??!1}):(0,z.jsx)(`h4`,{className:`sm:text-base text-xs text-white font-semibold font-inter px-4`,children:`Raffle winners`})]})}),l?(0,z.jsx)(z.Fragment,{}):(0,z.jsx)(`div`,{className:`w-full mt-6 flex items-center flex-col justify-center py-[18px] md:py-[22px] px-[26px] gap-4 md:gap-[26px] border border-gray-1100 rounded-[20px] bg-gray-1300`,children:(0,z.jsx)(`h3`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium text-center`,children:`Please connect your wallet first to enter a raffle.`})}),l&&l.toBase58()!==a?.createdBy&&a.state?.toLowerCase()===`active`&&(0,z.jsx)(`div`,{className:`w-full mt-6`,children:(0,z.jsxs)(`div`,{className:`w-full items-center grid lg:grid-cols-2 sm:grid-cols-2 grid-cols-1 gap-5`,children:[(0,z.jsx)(re,{max:ue}),(0,z.jsx)(`div`,{className:`w-full md:mb-5`,children:(0,z.jsx)(m,{className:`w-full h-[54px] disabled:opacity-50 disabled:cursor-not-allowed`,disabled:Q,text:Q?y?`Max Tickets Bought`:`Sold Out`:`Buy for ${(a?.ticketPrice/10**(M.find(e=>e.address===a?.ticketTokenAddress)?.decimals||0)*d).toFixed(4)} ${M.find(e=>e.address===a?.ticketTokenAddress)?.symbol}`,onclick:()=>{u.mutate({raffleId:a?.id||0,ticketsToBuy:d})}})})]})}),l&&l.toBase58()===a?.createdBy?(0,z.jsx)(`div`,{className:`w-full mt-6`,children:(0,z.jsxs)(`div`,{className:`w-full border rounded-xl px-10 items-center flex flex-col gap-5 justify-center py-2`,children:[(0,z.jsx)(`h3`,{className:`text-lg font-medium font-inter text-black-1000`,children:`Raffle Administrator`}),(0,z.jsx)(`div`,{className:`w-full md:mb-5`,children:ce?(0,z.jsx)(m,{className:`w-full h-[54px]`,text:`Claim Ticket Amount`,disabled:v.isPending||a?.ticketAmountClaimedByCreator,onclick:()=>{v.mutate(a?.id||0)}}):(0,z.jsx)(m,{className:`w-full h-[54px] ${Z?`opacity-50 cursor-not-allowed`:``} `,text:`Cancel Raffle`,disabled:Z,onclick:()=>{p.mutate(a?.id||0)}})})]})}):(0,z.jsx)(z.Fragment,{}),(0,z.jsxs)(`div`,{className:`w-full`,children:[(0,z.jsx)(`div`,{className:`w-full overflow-x-auto`,children:(0,z.jsx)(`ul`,{className:`flex items-center gap-3 2xl:gap-5 pb-6 pt-10 md:py-10 sm:w-auto md:w-[600px]`,children:Y.map((e,t)=>(0,z.jsx)(`li`,{children:(0,z.jsx)(`button`,{onClick:()=>{X(Y.map((e,n)=>({...e,active:n===t})))},className:`md:text-base whitespace-nowrap text-sm cursor-pointer font-inter font-medium transition duration-300 hover:bg-primary-color text-black-1000 rounded-full py-2.5 md:py-3.5 md:px-5 px-3 ${e.active?`bg-primary-color`:`bg-gray-1400`}`,children:e.name})},t))})}),Y[0].active&&(0,z.jsx)(te,{participants:a?.raffleEntries,ticketSupply:a?.ticketSupply||0}),Y[1].active&&(0,z.jsx)(N,{transactions:a?.raffleEntries?.flatMap(e=>e.transactions)??[]}),Y[2].active&&(0,z.jsx)(ne,{})]})]})]})}),a.prizeData.type===`NFT`?(0,z.jsxs)(`div`,{className:`md:hidden block border-t border-solid border-gray-1100`,children:[(0,z.jsxs)(`div`,{className:`w-full pb-7 pt-6 md:py-10 flex items-center justify-between`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-5 md:gap-3 2xl:gap-5`,children:[(0,z.jsx)(`img`,{src:`${j}${a?.creator?.profileImage}`,className:`w-12 h-12 rounded-full object-cover`,onError:e=>{e.currentTarget.src=T},alt:``}),(0,z.jsx)(`h3`,{className:`md:text-[28px] text-lg font-bold text-black-1000 font-inter`,children:a.prizeData.name})]}),(0,z.jsxs)(`ul`,{className:`flex items-center gap-6`,children:[(0,z.jsx)(`li`,{children:(0,z.jsx)(`a`,{href:`#`,children:(0,z.jsx)(`img`,{src:`/icons/twitter-icon.svg`,className:`md:w-7 md:h-7 w-6 h-6 object-contain`,alt:``})})}),(0,z.jsx)(`li`,{children:(0,z.jsxs)(`a`,{href:`#`,children:[` `,(0,z.jsx)(`img`,{src:`/icons/mcp-server-icon.svg`,className:`md:w-7 md:h-7 w-6 h-6 object-contain`,alt:``})]})})]})]}),(0,z.jsx)(`div`,{className:`w-full space-y-5`,children:V.map((t,n)=>(0,z.jsx)(e,{as:`div`,defaultOpen:n===0,className:`w-full py-4 md:py-6 px-5 border border-gray-1100 rounded-[20px]`,children:({open:n})=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(e.Button,{className:`flex items-center justify-between w-full text-base md:text-xl font-bold font-inter text-black-1000 ${n?`text-primary-color`:``}`,children:[(0,z.jsx)(`span`,{children:t.title}),(0,z.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:16,height:9,viewBox:`0 0 16 9`,fill:`none`,className:`${n?`rotate-180`:``} transition-transform`,children:(0,z.jsx)(`path`,{d:`M15 1L8 8L1 1`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`})})]}),(0,z.jsx)(e.Panel,{className:`w-full`,children:(0,z.jsx)(`ul`,{className:`space-y-6 pt-6`,children:t.items.map(e=>(0,z.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,z.jsx)(`p`,{className:`md:text-base text-sm font-inter font-medium text-gray-1200`,children:e.label}),(0,z.jsx)(`p`,{className:`md:text-base text-sm font-inter font-medium text-black-1000`,children:e.value})]},e.label))})})]})},t.title))})]}):(0,z.jsx)(z.Fragment,{})]})})}),(0,z.jsx)(C,{appear:!0,show:O,as:R.Fragment,children:(0,z.jsxs)(i,{as:`div`,className:`relative z-50`,onClose:()=>A(!1),children:[(0,z.jsx)(C.Child,{as:R.Fragment,enter:`ease-out duration-300`,enterFrom:`opacity-0`,enterTo:`opacity-100`,leave:`ease-in duration-200`,leaveFrom:`opacity-100`,leaveTo:`opacity-0`,children:(0,z.jsx)(`div`,{className:`fixed inset-0 bg-black/60 backdrop-blur-sm`})}),(0,z.jsx)(`div`,{className:`fixed inset-0 overflow-y-auto`,children:(0,z.jsx)(`div`,{className:`flex min-h-full items-center justify-center p-4 text-center`,children:(0,z.jsx)(C.Child,{as:R.Fragment,enter:`ease-out duration-300`,enterFrom:`opacity-0 scale-95`,enterTo:`opacity-100 scale-100`,leave:`ease-in duration-200`,leaveFrom:`opacity-100 scale-100`,leaveTo:`opacity-0 scale-95`,children:(0,z.jsxs)(i.Panel,{className:`w-full max-w-lg transform overflow-hidden rounded-[24px] bg-gray-1300 border border-gray-1100 p-6 text-left align-middle shadow-xl transition-all`,children:[(0,z.jsxs)(`div`,{className:`flex items-center justify-between mb-6`,children:[(0,z.jsxs)(i.Title,{as:`h3`,className:`text-xl font-bold font-inter text-black-1000 flex items-center gap-3`,children:[(0,z.jsx)(`div`,{className:`w-10 h-10 rounded-full bg-primary-color flex items-center justify-center`,children:(0,z.jsx)(I,{className:`w-5 h-5 text-white`})}),`Raffle Winners`]}),(0,z.jsx)(`button`,{onClick:()=>A(!1),className:`w-8 h-8 rounded-full bg-gray-1400 hover:bg-gray-1100 transition-colors flex items-center justify-center cursor-pointer`,children:(0,z.jsx)(L,{className:`w-4 h-4 text-black-1000`})})]}),(0,z.jsx)(`div`,{className:`space-y-3 max-h-[400px] overflow-y-auto pr-2`,children:a?.winners?.map((e,t)=>{let n=l?.toBase58()===e.walletAddress,r=(E&&E?.some(t=>t.sender===e.walletAddress))??!1,i=a.raffleEntries?.find(t=>t.userAddress===e.walletAddress)?.quantity;return(0,z.jsx)(`div`,{className:`p-4 rounded-[16px] border ${n?`bg-primary-color/10 border-primary-color`:`bg-white border-gray-1100`}`,children:(0,z.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,z.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,z.jsxs)(`div`,{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${n?`bg-primary-color text-white`:`bg-gray-1400 text-black-1000`}`,children:[`#`,t+1]}),(0,z.jsxs)(`div`,{children:[(0,z.jsxs)(`p`,{className:`font-semibold font-inter ${n?`text-primary-color`:`text-black-1000`}`,children:[e.walletAddress.slice(0,6),`...`,e.walletAddress.slice(-4),n&&(0,z.jsx)(`span`,{className:`ml-2 text-xs bg-primary-color text-white px-2 py-0.5 rounded-full`,children:`You`})]}),(0,z.jsxs)(`p`,{className:`text-sm text-gray-1200 font-inter`,children:[`Won with `,i||0,` ticket`,i===1?``:`s`]})]})]}),n&&(0,z.jsx)(m,{className:`h-10 px-4 text-sm`,onclick:()=>{h.mutate({raffleId:Number(a?.id)||0}),A(!1)},text:r?`Claimed`:`Claim Prize`,disabled:r||h.isPending}),!n&&r&&(0,z.jsx)(`span`,{className:`text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-full font-medium`,children:`Claimed`})]})},e.walletAddress)})}),(0,z.jsx)(`div`,{className:`mt-6 pt-4 border-t border-gray-1100`,children:(0,z.jsxs)(`p`,{className:`text-sm text-gray-1200 font-inter text-center`,children:[`Total Winners: `,a?.winners?.length||0,` /`,` `,a?.numberOfWinners]})})]})})})})]})}),(0,z.jsx)(C,{appear:!0,show:P,as:R.Fragment,children:(0,z.jsxs)(i,{as:`div`,className:`relative z-100`,onClose:()=>{H(!1),W(!0)},children:[(0,z.jsx)(C.Child,{as:R.Fragment,enter:`ease-out duration-300`,enterFrom:`opacity-0`,enterTo:`opacity-100`,leave:`ease-in duration-200`,leaveFrom:`opacity-100`,leaveTo:`opacity-0`,children:(0,z.jsx)(`div`,{className:`fixed inset-0 bg-black/70 backdrop-blur-sm`})}),(0,z.jsx)(`div`,{className:`fixed inset-0 overflow-y-auto`,children:(0,z.jsx)(`div`,{className:`flex min-h-full items-center justify-center p-4`,children:(0,z.jsx)(C.Child,{as:R.Fragment,enter:`ease-out duration-500`,enterFrom:`opacity-0 scale-50`,enterTo:`opacity-100 scale-100`,leave:`ease-in duration-300`,leaveFrom:`opacity-100 scale-100`,leaveTo:`opacity-0 scale-50`,children:(0,z.jsxs)(i.Panel,{className:`relative`,children:[(0,z.jsx)(`button`,{onClick:()=>{H(!1),W(!0)},className:`absolute -top-3 -right-3 w-10 h-10 rounded-full bg-white hover:bg-gray-100 transition-colors flex items-center justify-center cursor-pointer shadow-lg z-10`,children:(0,z.jsx)(L,{className:`w-5 h-5 text-black-1000`})}),(0,z.jsx)(`img`,{src:`/images/soldout.png`,alt:`Sold Out`,className:`animate-soldout-pulse max-w-[300px] md:max-w-[400px] w-full h-auto object-contain drop-shadow-2xl`})]})})})})]})}),(0,z.jsx)(C,{appear:!0,show:G,as:R.Fragment,children:(0,z.jsxs)(i,{as:`div`,className:`relative z-100`,onClose:()=>{K(!1),J(!0)},children:[(0,z.jsx)(C.Child,{as:R.Fragment,enter:`ease-out duration-300`,enterFrom:`opacity-0`,enterTo:`opacity-100`,leave:`ease-in duration-200`,leaveFrom:`opacity-100`,leaveTo:`opacity-0`,children:(0,z.jsx)(`div`,{className:`fixed inset-0 bg-black/70 backdrop-blur-sm`})}),(0,z.jsx)(`div`,{className:`fixed inset-0 overflow-y-auto`,children:(0,z.jsx)(`div`,{className:`flex min-h-full items-center justify-center p-4`,children:(0,z.jsx)(C.Child,{as:R.Fragment,enter:`ease-out duration-500`,enterFrom:`opacity-0 scale-50`,enterTo:`opacity-100 scale-100`,leave:`ease-in duration-300`,leaveFrom:`opacity-100 scale-100`,leaveTo:`opacity-0 scale-50`,children:(0,z.jsxs)(i.Panel,{className:`relative`,children:[(0,z.jsx)(`button`,{onClick:()=>{K(!1),J(!0)},className:`absolute -top-3 -right-3 w-10 h-10 rounded-full bg-white hover:bg-gray-100 transition-colors flex items-center justify-center cursor-pointer shadow-lg z-10`,children:(0,z.jsx)(L,{className:`w-5 h-5 text-black-1000`})}),(0,z.jsx)(`img`,{src:`/images/ticket.png`,alt:`Ticket Bought`,className:`animate-soldout-pulse max-w-[300px] md:max-w-[400px] w-full h-auto object-contain drop-shadow-2xl`})]})})})})]})})]})):(0,z.jsx)(`main`,{className:`py-20 text-center text-3xl font-bold text-red-500`,children:`Raffle not found!`})}export{H as component};