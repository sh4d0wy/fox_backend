import{$ as e,A as t,F as n,Hn as r,I as i,K as a,Kn as o,L as s,N as c,Q as l,Wn as u,X as d,Yn as f,Z as p,q as m,vn as h,wn as g,yn as _}from"./index-Cp_wugtV.js";import"./auctionRoutes-D8SLwpLc.js";import{n as v}from"./useAuctionsQuery-kWQtYIc6.js";import{t as y}from"./NoAuctions-DsqyMm5A.js";import{n as b,t as x}from"./aucations-data-CeqG0uMH.js";var S=f(o());const C=_(e=>({aucations:x,setAucations:t=>e({aucations:t}),filter:`All Auctions`,setFilter:t=>e({filter:t}),enabled1:!1,enabled2:!1,isOpen:!1,setEnabled1:t=>e({enabled1:t}),setEnabled2:t=>e({enabled2:t}),openModal:()=>e({isOpen:!0}),closeModal:()=>e({isOpen:!1}),endDate:null,hours:null,setEndDate:t=>e({endDate:t}),setHours:t=>e({hours:t})}));var w=f(u()),T=[{label:`Recently Added`,value:`Recently Added`},{label:`Expiring Soon`,value:`Expiring Soon`},{label:`Price: Low to High`,value:`Price: Low to High`},{label:`Price: High to Low`,value:`Price: High to Low`},{label:`Floor: Low to High`,value:`Floor: Low to High`},{label:`Floor: High to Low`,value:`Floor: High to Low`}];function E(){let{filter:o,setFilter:u}=C(),{data:f,fetchNextPage:_,hasNextPage:x,isLoading:E}=v(o),{sort:D,setSort:O,searchQuery:k,setSearchQuery:A}=h(),{raffleType:j,selectedToken:M,selectedCollection:N,floorMin:P,floorMax:F,endTimeAfter:I,endTimeBefore:L,filtersApplied:R,clearFilter:z,resetFilters:B,setPageType:V}=m();(0,S.useEffect)(()=>{V(`auctions`)},[V]);let H=(0,S.useMemo)(()=>({raffleType:j,selectedToken:M,selectedCollection:N,floorMin:P,floorMax:F,endTimeAfter:I,endTimeBefore:L}),[j,M,N,P,F,I,L]),U=(0,S.useMemo)(()=>n(H,`auctions`),[H]),{getAllAuctions:W}=t(),G=W.data?.find(e=>e.account.auctionId===15);console.log(`auction end time`,new g.default(G?.account.endTime).toNumber());let K=i(H,`auctions`),q=(0,S.useMemo)(()=>{let e=f?.pages.flatMap(e=>e.items)||[];if(k.trim()){let t=k.toLowerCase().trim();e=e.filter(e=>e.prizeName?.toLowerCase().includes(t))}return R&&K&&(e=c(e,H)),D&&D!==`Sort`&&(e=s(e,D)),e},[f,k,D,R,K,H]);return(0,S.useEffect)(()=>{A(``)},[]),(0,S.useEffect)(()=>{!E&&q.length===0&&x&&_()},[E,q.length,x,_]),console.log(`auctions`,q),(0,w.jsx)(`main`,{className:`main font-inter`,children:(0,w.jsx)(`section`,{className:`w-full lg:pt-[60px] pt-5 pb-20 md:pb-[120px]`,children:(0,w.jsxs)(`div`,{className:`w-full max-w-[1440px] px-5 mx-auto`,children:[(0,w.jsxs)(`div`,{className:`w-full flex items-center justify-between gap-5 lg:gap-10 flex-wrap`,children:[(0,w.jsx)(`ul`,{className:`flex items-center gap-3 md:gap-5 md:w-auto w-full`,children:[`All Auctions`,`Past Auctions`].map((e,t)=>(0,w.jsx)(`li`,{className:`flex-1 md:flex-auto`,children:(0,w.jsxs)(`button`,{onClick:()=>u(e),className:`md:text-base text-sm md:w-auto w-full cursor-pointer font-inter font-medium transition duration-300 hover:bg-primary-color text-black-1000 rounded-full py-2.5 md:py-3.5 px-5
                      ${o===e?`bg-primary-color`:`bg-gray-1400`}`,children:[` `,e]})},t))}),(0,w.jsxs)(`div`,{className:`flex justify-start lg:justify-end gap-3.5 md:gap-5`,children:[(0,w.jsx)(p,{placeholder:`Search auctions...`,value:k,onSearch:e=>{A(e)}}),(0,w.jsx)(l,{options:T,selected:D,onChange:e=>{O(e),console.log(`Selected sort option:`,e)}}),(0,w.jsx)(a,{})]})]}),(0,w.jsx)(`div`,{className:`lg:py-10 py-5 overflow-x-auto flex gap-4`,children:(0,w.jsx)(`div`,{className:`${K?`flex`:`hidden`} items-center gap-4`,children:K&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(`p`,{className:`md:text-base text-sm whitespace-nowrap font-black-1000 font-semibold font-inter`,children:`Filters :`}),(0,w.jsxs)(`ul`,{className:`flex items-center gap-4`,children:[(0,w.jsx)(`li`,{children:(0,w.jsxs)(`div`,{className:`border group hover:border-black-1000 transition duration-200 h-12 inline-flex items-center justify-center rounded-full border-gray-1100 px-5 py-3 gap-2`,children:[(0,w.jsx)(`p`,{className:`md:text-base whitespace-nowrap text-sm font-inter font-medium text-black-1000`,children:`Clear All`}),(0,w.jsx)(`button`,{onClick:()=>B(),className:`cursor-pointer`,children:(0,w.jsx)(`img`,{src:`/icons/cross-icon.svg`,className:`min-w-4`,alt:`cross icon`})})]})}),U.map(e=>(0,w.jsx)(`li`,{children:(0,w.jsxs)(`div`,{className:`border group hover:border-black-1000 transition duration-200 h-12 inline-flex items-center justify-center rounded-full border-gray-1100 px-5 py-3 gap-2`,children:[(0,w.jsx)(`p`,{className:`md:text-base whitespace-nowrap text-sm font-inter font-medium text-black-1000`,children:e.label}),(0,w.jsx)(`button`,{onClick:()=>z(e.id),className:`cursor-pointer`,children:(0,w.jsx)(`img`,{src:`/icons/cross-icon.svg`,className:`min-w-4`,alt:`remove icon`})})]})},e.id))]})]})})}),E?(0,w.jsx)(`div`,{className:`flex items-center min-h-[60vh] justify-center`,children:(0,w.jsx)(`img`,{src:`/loading-vector.svg`,alt:``})}):q.length>0?(0,w.jsx)(d,{dataLength:q.length,next:_,hasMore:!!x,scrollThreshold:.8,loader:(0,w.jsx)(`div`,{className:`grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mt-5`,children:[,,,,].fill(0).map((t,n)=>(0,w.jsx)(e,{},n))}),children:(0,w.jsx)(`div`,{className:`grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4`,children:q.map(e=>(0,w.jsx)(r,{to:`/auctions/$id`,params:{id:e.id?.toString()||``},children:(0,w.jsx)(b,{...e,id:e.id??0,prizeName:e.prizeName??``,prizeImage:e.prizeImage??``,collectionName:e.collectionName??``,reservePrice:e.reservePrice??``,status:e.status??``},e.id)},e.id))})}):(0,w.jsx)(y,{})]})})})}export{E as component};