import{Fn as e,Kn as t,Nn as n,On as r,Ot as i,St as a,T as o,Un as s,Vn as c,Wn as l,Yn as u,at as d,d as f,g as p,h as m,ht as h,it as g,kt as _,lt as v,m as y,p as b,rt as x,ut as S,xn as C,xt as w,y as T,zn as E}from"./index-DL1tneOs.js";import{t as D}from"./GumballPrizesTable-DJZIG8vX.js";var O=u(t(),1),k=u(l(),1);const A=({spins:e})=>{let t=e.filter(e=>e.isPendingClaim===!1&&e.claimedAt!==null),n=(e,t)=>`${parseFloat(e)/10**(a.find(e=>e.address===t)?.decimals||0)}`;return(0,k.jsxs)(`div`,{className:`relative`,children:[(0,k.jsx)(`p`,{className:`text-base font-medium absolute z-10 -top-22 bg-primary-color w-fit px-4 py-3 rounded-full font-inter text-black-1000`,children:`Recent Spins`}),(0,k.jsx)(`div`,{className:`border border-gray-1100 rounded-[20px] w-full overflow-x-auto xl:overflow-hidden`,children:(0,k.jsxs)(`table`,{className:`table xl:w-full w-[500px] md:w-[600px]`,children:[(0,k.jsx)(`thead`,{className:`bg-gray-1300`,children:(0,k.jsxs)(`tr`,{className:`flex-1`,children:[(0,k.jsx)(`th`,{scope:`col`,className:`text-base w-1/3 text-start font-inter text-gray-1600 font-medium px-4 md:px-10 py-4 md:py-7`,children:`Prize`}),(0,k.jsx)(`th`,{scope:`col`,className:`text-base w-1/5 text-start font-inter text-gray-1600 font-medium`,children:(0,k.jsx)(`div`,{className:`pl-5 h-6 border-l border-gray-1600`,children:` TX`})}),(0,k.jsx)(`th`,{scope:`col`,className:`text-base w-1/5 text-start font-inter text-gray-1600 font-medium`,children:(0,k.jsx)(`div`,{className:`pl-5 h-6 border-l border-gray-1600`,children:`Time`})})]})}),(0,k.jsx)(`tbody`,{children:t.map(e=>(0,k.jsxs)(`tr`,{className:`flex-1`,children:[(0,k.jsx)(`td`,{scope:`row`,children:(0,k.jsxs)(`div`,{className:`md:px-10 px-4 flex items-center gap-5 md:gap-2.5 py-6 border-b border-gray-1100`,children:[(0,k.jsx)(`img`,{src:e.prize.image??`/images/placeholder-user.png`,className:`md:w-[60px] w-10 h-10 md:h-[60px] rounded-full object-cover`,alt:`no img`}),e.prize?e.prize.isNft?(0,k.jsx)(`p`,{className:`text-base text-black-1000 font-medium font-inter`,children:e.prize.name}):(0,k.jsx)(`p`,{className:`text-base text-black-1000 font-medium font-inter`,children:n(e.prize.prizeAmount,e.prize.mint)}):(0,k.jsx)(`p`,{className:`text-base text-black-1000 font-medium font-inter`,children:`Prize not claimed yet`})]})}),(0,k.jsx)(`td`,{children:(0,k.jsxs)(`div`,{className:`3xl:px-5 px-0 flex items-center gap-2.5 py-[34px] md:py-[42px] border-b border-gray-1100`,children:[(0,k.jsxs)(`p`,{className:`md:text-base text-sm text-black-1000 font-medium font-inter`,children:[e.transaction.transactionId.slice(0,6),`...`,e.transaction.transactionId.slice(-4)]}),(0,k.jsx)(`img`,{src:`/icons/external-link-icon.svg`,onClick:()=>window.open(`https://solscan.io/tx/${e.transaction.transactionId}`,`_blank`),className:`w-5 h-5 cursor-pointer`,alt:`link`})]})}),(0,k.jsx)(`td`,{children:(0,k.jsx)(`div`,{className:`3xl:px-5 px-0 flex items-center gap-2.5 py-[34px] md:py-[42px] border-b border-gray-1100`,children:(0,k.jsx)(`p`,{className:`md:text-base text-sm text-black-1000 font-medium font-inter`,children:new Date(e.spunAt).toLocaleString(`en-GB`,{day:`2-digit`,month:`short`,year:`2-digit`}).replace(`,`,``).replace(/ (\d{2})$/,`'$1`)})})})]},e.id))})]})})]})};e();const j=()=>{let e=c(),{checkAndInvalidateToken:t}=v(),{publicKey:i,sendTransaction:a}=r(),o=async e=>{try{if(!i)throw Error(`Wallet not connected`);if(!await t(i.toBase58()))throw Error(`Signature verification failed`);if(!e.gumballId)throw Error(`Gumball ID is required`);return!0}catch(e){return e instanceof Error?S.error(e.message):S.error(`Something went wrong`),!1}};return{spinGumballFunction:E({mutationKey:[`gumball`,`spin`],mutationFn:async e=>{if(!await o(e))throw Error(`Validation failed`);console.log(`args`,e);let{base64Transaction:t,minContextSlot:r,blockhash:i,lastValidBlockHeight:s}=await m(e.gumballId.toString()),c=Buffer.from(t,`base64`),l=await a(n.from(c),w,{minContextSlot:r}),u=await w.confirmTransaction({blockhash:i,lastValidBlockHeight:s,signature:l});if(u.value.err)throw console.log(`Failed to create auction`,u.value.err),Error(`Failed to create auction`);let d=await p(e.gumballId.toString(),l.toString());if(d.error)throw Error(d.error);return e.gumballId},onSuccess:t=>{e.invalidateQueries({queryKey:[`gumball`,t.toString()]}),S.success(`Gumball spun successfully`)},onError:e=>{e.message!==`Validation failed`&&S.error(`Failed to spin gumball`)}})}};e();const M=()=>{let e=c(),{checkAndInvalidateToken:t}=v(),{publicKey:i,sendTransaction:a}=r(),o=async e=>{try{if(!i)throw Error(`Wallet not connected`);if(!await t(i.toBase58()))throw Error(`Signature verification failed`);if(!e.gumballId)throw Error(`Gumball ID is required`);if(!e.spinId)throw Error(`Spin ID is required`);return!0}catch(e){return e instanceof Error?S.error(e.message):S.error(`Something went wrong`),!1}};return{claimGumballPrizeFunction:E({mutationKey:[`gumball`,`claim`],mutationFn:async e=>{if(!await o(e))throw Error(`Validation failed`);console.log(`args`,e);let{base64Transaction:t,minContextSlot:r,blockhash:i,lastValidBlockHeight:s,prizeIndex:c}=await y(e.gumballId.toString(),e.spinId.toString()),l=Buffer.from(t,`base64`),u=await a(n.from(l),w,{minContextSlot:r}),d=await w.confirmTransaction({blockhash:i,lastValidBlockHeight:s,signature:u});if(d.value.err)throw console.log(`Failed to create auction`,d.value.err),Error(`Failed to create auction`);let f=await b(e.gumballId.toString(),u.toString(),c,e.spinId);if(f.error)throw Error(f.error);return{gumballId:e.gumballId,prizeIndex:c}},onSuccess:t=>{e.invalidateQueries({queryKey:[`gumball`,t.gumballId.toString()]}),S.success(`Gumball prize claimed successfully`)},onError:e=>{e.message!==`Validation failed`&&S.error(`Failed to claim gumball prize`)}})}},N=({prizes:e,isActive:t,status:n,isSpinning:r=!1,onSpinComplete:i})=>{let a=(0,O.useRef)(null),o=(0,O.useRef)(null),s=(0,O.useRef)([]),c=(0,O.useRef)(new Map),l=(0,O.useRef)(0),[u,d]=(0,O.useState)({width:0,height:0}),f=(0,O.useCallback)((e,t,n)=>{let r=n?30:0,i=15+e/Math.max(t,1)*(25-r)+r;return Math.max(15,Math.min(i,40))},[]),p=(0,O.useCallback)(()=>{if(!u.width||!u.height)return;let t=e.reduce((e,t)=>e+t.remainingQuantity,0),n=[];e.forEach((e,r)=>{let i=Math.min(e.remainingQuantity,15),a=f(e.remainingQuantity,t,e.isNft);for(let t=0;t<i;t++){let i=a+10;n.push({id:`${r}-${t}`,x:i+Math.random()*(u.width-i*2),y:i+Math.random()*(u.height-i*2),vx:(Math.random()-.5)*3,vy:(Math.random()-.5)*3,radius:a,image:e.image||`/images/gumballs/sol-img-frame.png`,isNft:e.isNft,prizeIndex:r})}}),s.current=n},[e,u,f]);(0,O.useEffect)(()=>{new Set(e.map(e=>e.image||`/images/gumballs/sol-img-frame.png`)).forEach(e=>{if(!c.current.has(e)){let t=new Image;t.crossOrigin=`anonymous`,t.src=e,c.current.set(e,t)}})},[e]),(0,O.useEffect)(()=>{let e=()=>{if(a.current){let e=a.current.getBoundingClientRect();d({width:e.width,height:e.height})}};return e(),window.addEventListener(`resize`,e),()=>window.removeEventListener(`resize`,e)},[]),(0,O.useEffect)(()=>{u.width&&u.height&&p()},[u,p]);let m=(0,O.useRef)(0),h=(0,O.useRef)(!1),g=(0,O.useRef)([]);(0,O.useEffect)(()=>{r&&(m.current=Date.now(),h.current=!1,g.current=s.current.map(e=>({x:e.x,y:e.y})))},[r]),(0,O.useEffect)(()=>{if(!o.current||!u.width||!u.height)return;let e=o.current.getContext(`2d`);if(!e)return;let t=s.current.map(()=>Math.random()*Math.PI*2),n=Math.min(u.width,u.height)*.35,a=s.current.map((e,t)=>t/s.current.length*Math.PI*2),d=0,f=5e3,p=()=>{e.clearRect(0,0,u.width,u.height),d+=.015;let o=u.width/2,g=u.height/2;if(r&&!h.current&&Date.now()-m.current>=f&&(h.current=!0,i&&i()),s.current.forEach((i,s)=>{let l=t[s];if(r&&!h.current){let e=Date.now()-m.current,t=Math.min(e/f,1),r=(1-(t<.5?4*t*t*t:1-(-2*t+2)**3/2)*.7)*12,c=a[s]+d*r,l=n*(.8+.2*Math.sin(t*Math.PI));i.x=o+Math.cos(c)*l,i.y=g+Math.sin(c)*l}else{i.vx=Math.sin(d+l)*.5,i.vy=Math.cos(d*.7+l)*.4,i.x+=i.vx,i.y+=i.vy;let e=i.radius+5;i.x<e?i.x=e:i.x>u.width-e&&(i.x=u.width-e),i.y<e?i.y=e:i.y>u.height-e&&(i.y=u.height-e)}e.beginPath(),e.arc(i.x+3,i.y+3,i.radius,0,Math.PI*2),e.fillStyle=`rgba(0, 0, 0, 0.08)`,e.fill(),e.save(),e.beginPath(),e.arc(i.x,i.y,i.radius,0,Math.PI*2),e.closePath(),e.clip();let p=c.current.get(i.image);if(p&&p.complete&&p.naturalWidth>0)e.drawImage(p,i.x-i.radius,i.y-i.radius,i.radius*2,i.radius*2);else{let t=e.createRadialGradient(i.x-i.radius*.3,i.y-i.radius*.3,0,i.x,i.y,i.radius);t.addColorStop(0,i.isNft?`#ff69b4`:`#ffd700`),t.addColorStop(1,i.isNft?`#ff1493`:`#ff8c00`),e.fillStyle=t,e.fill()}e.restore(),e.beginPath(),e.arc(i.x,i.y,i.radius,0,Math.PI*2),r&&!h.current?(e.strokeStyle=`rgba(255, 20, 147, 0.8)`,e.lineWidth=3):(e.strokeStyle=i.isNft?`rgba(255, 20, 147, 0.6)`:`rgba(200, 200, 200, 0.8)`,e.lineWidth=i.isNft?3:2),e.stroke(),(i.isNft||r&&!h.current)&&(e.beginPath(),e.arc(i.x,i.y,i.radius+4,0,Math.PI*2),e.strokeStyle=r&&!h.current?`rgba(255, 20, 147, 0.4)`:`rgba(255, 20, 147, 0.2)`,e.lineWidth=4,e.stroke())}),!r||h.current)for(let e=0;e<s.current.length;e++)for(let t=e+1;t<s.current.length;t++){let n=s.current[e],r=s.current[t],i=r.x-n.x,a=r.y-n.y,o=Math.sqrt(i*i+a*a),c=n.radius+r.radius+5;if(o<c){let e=Math.atan2(a,i),t=c-o,s=t/2*Math.cos(e)*.3,l=t/2*Math.sin(e)*.3;n.x-=s,n.y-=l,r.x+=s,r.y+=l}}l.current=requestAnimationFrame(p)};return p(),()=>{l.current&&cancelAnimationFrame(l.current)}},[u,r,i]);let _=e.reduce((e,t)=>e+Math.min(t.quantity,15),0);return!e||e.length===0?(0,k.jsx)(`div`,{className:`w-full h-[506px] rounded-[20px] bg-white flex items-center justify-center`,children:(0,k.jsxs)(`div`,{className:`relative  w-full h-full bg-black/50 flex items-center justify-center z-10 rounded-[20px]`,children:[(0,k.jsx)(`img`,{src:`/images/ended-img-1.png`,alt:`no-prizes`,className:`w-full h-full object-cover absolute -z-10 rounded-[20px]`}),(0,k.jsx)(`div`,{className:`absolute inset-0 bg-black/50 flex items-center justify-center z-10 rounded-[20px]`}),(0,k.jsx)(`p`,{className:`md:text-[28px] text-lg text-white font-bold font-inter absolute z-10 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`,children:`No Prizes Available`})]})}):(0,k.jsx)(`div`,{className:`relative w-full`,children:(0,k.jsxs)(`div`,{ref:a,className:`relative w-full h-[506px] rounded-[20px] overflow-hidden bg-white`,children:[(0,k.jsx)(`canvas`,{ref:o,width:u.width,height:u.height,className:`absolute inset-0`}),!t&&(0,k.jsx)(`div`,{className:`absolute inset-0 bg-black/50 flex items-center justify-center z-10`,children:(0,k.jsx)(`p`,{className:`md:text-[28px] text-lg text-white font-bold font-inter`,children:n===`CANCELLED`?`Cancelled`:n===`COMPLETED_SUCCESSFULLY`||n===`COMPLETED_FAILED`?`Sale Ended`:`Not Started`})}),(0,k.jsx)(`div`,{className:`absolute top-4 right-4 bg-gray-100 px-3 py-1.5 rounded-full z-20`,children:(0,k.jsxs)(`span`,{className:`text-gray-600 text-sm font-inter font-medium`,children:[_,` `,_===1?`prize`:`prizes`]})})]})})};var P=({isOpen:e,onClose:t,prize:n,onClaimPrize:r,isClaimPending:o,isClaimed:s,canClose:c})=>{let l=(e,t)=>`${parseFloat(e)/10**(a.find(e=>e.address===t)?.decimals||0)}`;return(0,k.jsxs)(i,{open:e,as:`div`,className:`relative z-50`,onClose:c?t:()=>{},children:[(0,k.jsx)(`div`,{className:`fixed inset-0 bg-black/70`,"aria-hidden":`true`}),(0,k.jsx)(`div`,{className:`fixed inset-0 z-10 w-screen overflow-y-auto`,children:(0,k.jsx)(`div`,{className:`flex min-h-full items-center justify-center p-4`,children:(0,k.jsx)(_,{transition:!0,className:`relative z-10 w-full max-w-md duration-300 ease-out data-closed:transform-[scale(95%)] data-closed:opacity-0`,children:(0,k.jsxs)(`div`,{className:`bg-white rounded-[24px] p-6 shadow-2xl`,children:[(0,k.jsx)(`p`,{className:`text-primary-color text-center mb-4 font-bold text-2xl font-inter`,children:`You won!`}),c&&(0,k.jsx)(`button`,{onClick:t,className:`absolute top-4 right-4 w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-300 cursor-pointer`,children:(0,k.jsx)(`svg`,{width:`14`,height:`14`,viewBox:`0 0 14 14`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,k.jsx)(`path`,{d:`M1 1L13 13M1 13L13 1`,stroke:`#374151`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`})})}),(0,k.jsxs)(`div`,{className:`flex flex-col items-center pt-4`,children:[(0,k.jsx)(`div`,{className:`relative w-[300px] h-[300px] flex items-center justify-center flex-col gap-4`,children:s&&n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(`img`,{src:n.prizeImage??``,alt:n.prizeImage,className:`w-[200px] h-[200px] object-cover`}),n.isNft?(0,k.jsx)(`p`,{className:`text-black-1000 font-bold text-lg font-inter`,children:`1x NFT`}):(0,k.jsxs)(`p`,{className:`text-black-1000 font-bold text-lg font-inter`,children:[l(n.prizeAmount,n.prizeMint),` `,a.find(e=>e.address===n.prizeMint)?.symbol]})]}):(0,k.jsxs)(`div`,{className:`flex flex-col items-center justify-center gap-4`,children:[(0,k.jsx)(`img`,{src:`/images/gumballs/gift_image.png`,alt:`Gift box`,className:`w-[200px] h-[200px] object-cover`}),(0,k.jsx)(`p`,{className:`text-black-1000 font-bold text-lg font-inter`,children:`Open to reveal your prize!`})]})}),!s&&(0,k.jsx)(`button`,{onClick:r,disabled:o,className:`mt-6 w-full cursor-pointer px-12 py-3.5 rounded-full font-bold text-lg font-inter transition-all duration-300 hover:scale-[1.02] hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed`,style:{background:`var(--color-primary-color)`,color:`var(--color-white-1000)`,boxShadow:`0 6px 24px rgba(255, 20, 147, 0.35)`},children:o?`Claiming...`:`Claim prize`})]})]})})})})]})};function F(){let{id:e}=T.useParams(),{data:t,isLoading:n,isError:i,refetch:c}=f(e||``),l=t,u=s(),[p,m]=(0,O.useState)(null),[_,v]=(0,O.useState)(!1),[y,b]=(0,O.useState)(null),[S,w]=(0,O.useState)(null),{spinGumballFunction:E}=j(),{claimGumballPrizeFunction:F}=M(),{publicKey:I}=r(),{favouriteGumball:L}=d(I?.toString()||``),{getFavouriteGumball:R}=g(I?.toString()||``,`Gumballs`),ee=(0,O.useMemo)(()=>R.data?.some(t=>t.id===Number(e)),[R.data,e]),[z,B]=(0,O.useState)([{name:`Gumball Prizes`,active:!0}]),V=l?.status===`ACTIVE`,[te,ne]=(0,O.useState)(1),[H,U]=(0,O.useState)(!1),[W,G]=(0,O.useState)(!1),[K,q]=(0,O.useState)(!1),J=(0,O.useRef)(!1),Y=(0,O.useMemo)(()=>{if(!l?.prizes)return[];let e={};return l.spins?.forEach(t=>{let n=t.prize?.prizeIndex;n!=null&&(e[n]=(e[n]||0)+1)}),l.prizes.map(t=>({...t,remainingQuantity:t.quantity-(e[t.prizeIndex]||0)})).filter(e=>e.remainingQuantity>0)},[l?.prizes,l?.spins]),X=async()=>{try{await E.mutateAsync({gumballId:parseInt(e||``)}),G(!0)}catch(e){console.error(`Failed to spin gumball:`,e),G(!1),q(!1)}},Z=()=>{G(!1),q(!0)},Q=async()=>{try{if(!S){console.error(`No unclaimed spin ID found`);return}b((await F.mutateAsync({gumballId:parseInt(e||``),spinId:S})).prizeIndex)}catch(e){console.error(`Failed to claim prize:`,e)}},{totalValueInSol:re,isLoading:ie,formattedValue:ae}=o(l?.prizes),oe=(e,t)=>e?t?`${(parseFloat(e)/10**9).toFixed(7)} `:`${(parseFloat(e)/10**(a.find(e=>e.address===l?.ticketMint)?.decimals||0)).toFixed(7)} `:`0`,se=l?l.ticketsSold/l.totalTickets*100:0,ce=e=>e?`${e.slice(0,4)}...${e.slice(-4)}`:``;(0,O.useEffect)(()=>{if(_&&l&&y!==null){let e=l.prizes.find(e=>e.prizeIndex===y);e&&m({gumballId:l.id,prizeIndex:e.prizeIndex,prizeMint:e.mint,ticketPrice:l.ticketPrice,ticketMint:l.ticketMint,isTicketSol:l.isTicketSol,prizeImage:e.image||``,prizeAmount:e.prizeAmount,isNft:e.isNft})}},[_,l,y]),(0,O.useEffect)(()=>{F.isSuccess&&F.data&&(v(!0),G(!1),c())},[F.isSuccess,F.data,c]);let $=()=>!l||!I?null:(l.spins?.filter(e=>e.spinnerAddress===I.toString())||[]).sort((e,t)=>new Date(t.spunAt).getTime()-new Date(e.spunAt).getTime()).find(e=>e.isPendingClaim===!0||e.claimedAt===null)||null;return(0,O.useEffect)(()=>{J.current=!1},[e]),(0,O.useEffect)(()=>{if(l&&I&&!W&&!J.current&&l.spins){let e=$();e&&(U(!0),v(!1),m(null),w(e.id)),J.current=!0}},[l,I,W,e]),(0,O.useEffect)(()=>{if(K&&l&&I&&!W){let e=$();e&&(U(!0),v(!1),m(null),w(e.id)),q(!1)}},[K,l,I,W]),n?(0,k.jsx)(`main`,{className:`w-full min-h-screen flex items-center justify-center`,children:(0,k.jsxs)(`div`,{className:`text-center`,children:[(0,k.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-primary-color mx-auto`}),(0,k.jsx)(`p`,{className:`mt-4 text-gray-1200 font-inter`,children:`Loading gumball...`})]})}):i||!l?(0,k.jsx)(`main`,{className:`w-full min-h-screen flex items-center justify-center`,children:(0,k.jsxs)(`div`,{className:`text-center`,children:[(0,k.jsx)(`p`,{className:`text-xl text-black-1000 font-inter font-semibold`,children:`Gumball not found`}),(0,k.jsx)(`button`,{onClick:()=>u.navigate({to:`/gumballs`}),className:`mt-4 cursor-pointer px-6 py-2.5 bg-primary-color rounded-full text-white font-semibold`,children:`Go Back`})]})}):(0,k.jsxs)(`main`,{children:[(0,k.jsx)(`div`,{className:`w-full pb-2 pt-5 md:py-10 max-w-[1440px] px-5 mx-auto`,children:(0,k.jsxs)(`button`,{onClick:()=>u.navigate({to:`/gumballs`}),className:`cursor-pointer px-3.5 md:px-[30px] transition duration-300 hover:opacity-80 inline-flex items-center gap-2.5 py-2.5 bg-gray-1400 rounded-full text-sm md:text-base font-semibold text-black-1000`,children:[(0,k.jsx)(`img`,{src:`/icons/back-arw.svg`,alt:``}),`Back`]})}),(0,k.jsx)(`section`,{className:`w-full pb-20`,children:(0,k.jsxs)(`div`,{className:`w-full max-w-[1280px] px-5 mx-auto`,children:[(0,k.jsxs)(`div`,{className:`w-full flex gap-[60px] md:gap-10 md:flex-row flex-col`,children:[(0,k.jsx)(`div`,{className:`flex-1`,children:(0,k.jsx)(`div`,{className:`md:p-[18px] p-2 rounded-[20px] border border-gray-1100`,children:(0,k.jsx)(N,{prizes:Y,isActive:V,status:l.status,isSpinning:W,onSpinComplete:Z})})}),(0,k.jsx)(`div`,{className:`flex-1 max-w-[467px]`,children:(0,k.jsxs)(`div`,{className:`w-full`,children:[(0,k.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,k.jsx)(`h1`,{className:`md:text-[28px] text-xl font-inter font-bold text-black-1000`,children:l.name}),(0,k.jsx)(`span`,{className:`text-xs font-semibold px-3 py-1 rounded-full ${l.status===`ACTIVE`?`bg-green-100 text-green-600`:l.status===`COMPLETED_SUCCESSFULLY`||l.status===`COMPLETED_FAILED`?`bg-gray-200 text-gray-600`:l.status===`CANCELLED`?`bg-red-100 text-red-600`:`bg-yellow-100 text-yellow-600`}`,children:l.status===`ACTIVE`?`Active`:l.status===`COMPLETED_SUCCESSFULLY`||l.status===`COMPLETED_FAILED`?`Ended`:l.status===`CANCELLED`?`Cancelled`:`Not Started`})]}),(0,k.jsxs)(`div`,{className:`w-full flex flex-col gap-5`,children:[(0,k.jsxs)(`div`,{className:`w-full flex items-center justify-between md:pt-5 py-6 md:pb-6`,children:[(0,k.jsxs)(`div`,{className:`inline-flex gap-4`,children:[(0,k.jsx)(`img`,{src:l.creator.profileImage?`${C}${l.creator?.profileImage}`:`/icons/user-avatar.png`,className:`w-10 h-10 rounded-full object-cover`,alt:`creator`}),(0,k.jsxs)(`div`,{className:``,children:[(0,k.jsx)(`p`,{className:`text-xs font-inter font-normal text-gray-1200 md:pb-0 pb-1`,children:`Creator`}),(0,k.jsx)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-semibold`,children:ce(l.creatorAddress)})]})]}),(0,k.jsxs)(`button`,{onClick:()=>{L.mutate({gumballId:Number(e)||0})},className:`border hover:bg-primary-color hover:border-primary-color transition duration-300 cursor-pointer px-5 py-[7px] md:py-2.5 gap-2.5 border-black-1000 rounded-full text-sm md:text-base font-semibold font-inter text-black-1000 inline-flex items-center justify-center ${ee?`bg-primary-color border-primary-color text-white transition duration-300 `:``}`,children:[(0,k.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`currentColor`,children:(0,k.jsx)(`path`,{d:`M12 5.50066L11.4596 6.02076C11.601 6.16766 11.7961 6.25066 12 6.25066C12.2039 6.25066 12.399 6.16766 12.5404 6.02076L12 5.50066ZM9.42605 18.3219C7.91039 17.1271 6.25307 15.9603 4.93829 14.4798C3.64922 13.0282 2.75 11.3345 2.75 9.13713H1.25C1.25 11.8026 2.3605 13.8361 3.81672 15.4758C5.24723 17.0866 7.07077 18.3752 8.49742 19.4999L9.42605 18.3219ZM2.75 9.13713C2.75 6.98626 3.96537 5.18255 5.62436 4.42422C7.23607 3.68751 9.40166 3.88261 11.4596 6.02076L12.5404 4.98056C10.0985 2.44355 7.26409 2.02542 5.00076 3.05999C2.78471 4.07295 1.25 6.42506 1.25 9.13713H2.75ZM8.49742 19.4999C9.00965 19.9037 9.55954 20.3343 10.1168 20.6599C10.6739 20.9854 11.3096 21.25 12 21.25V19.75C11.6904 19.75 11.3261 19.6293 10.8736 19.3648C10.4213 19.1005 9.95208 18.7366 9.42605 18.3219L8.49742 19.4999ZM15.5026 19.4999C16.9292 18.3752 18.7528 17.0866 20.1833 15.4758C21.6395 13.8361 22.75 11.8026 22.75 9.13713H21.25C21.25 11.3345 20.3508 13.0282 19.0617 14.4798C17.7469 15.9603 16.0896 17.1271 14.574 18.3219L15.5026 19.4999ZM22.75 9.13713C22.75 6.42506 21.2153 4.07295 18.9992 3.05999C16.7359 2.02542 13.9015 2.44355 11.4596 4.98056L12.5404 6.02076C14.5983 3.88261 16.7639 3.68751 18.3756 4.42422C20.0346 5.18255 21.25 6.98626 21.25 9.13713H22.75ZM14.574 18.3219C14.0479 18.7366 13.5787 19.1005 13.1264 19.3648C12.6739 19.6293 12.3096 19.75 12 19.75V21.25C12.6904 21.25 13.3261 20.9854 13.8832 20.6599C14.4405 20.3343 14.9903 19.9037 15.5026 19.4999L14.574 18.3219Z`,fill:`currentColor`})}),`Favourite`]})]}),(0,k.jsxs)(`div`,{className:`w-full flex items-center justify-start`,children:[(0,k.jsx)(`p`,{className:`text-lg font-semibold font-inter text-black-1000 w-full`,children:`Ends in`}),l.status!==`INITIALIZED`&&(0,k.jsx)(h,{endsAt:new Date(l.endTime),status:l.status===`ACTIVE`?`ACTIVE`:`ENDED`,className:``})]}),(0,k.jsxs)(`div`,{className:`w-full flex items-center justify-between py-4 px-5 border border-gray-1100 rounded-[20px] bg-gray-1300`,children:[(0,k.jsxs)(`div`,{className:`inline-flex flex-col gap-2.5`,children:[(0,k.jsx)(`p`,{className:`font-inter text-sm text-gray-1200`,children:`Ticket Price`}),(0,k.jsxs)(`h4`,{className:`lg:text-[24px] text-xl font-semibold font-inter text-primary-color`,children:[oe(l.ticketPrice,l.isTicketSol),l.isTicketSol?` SOL`:a.find(e=>e.address===l.ticketMint)?.symbol]})]}),(0,k.jsxs)(`div`,{className:`inline-flex flex-col gap-2.5 text-right`,children:[(0,k.jsx)(`p`,{className:`font-inter text-sm text-gray-1200`,children:`Total Prize Value`}),(0,k.jsx)(`h3`,{className:`lg:text-[28px] text-xl font-semibold font-inter text-black-1000`,children:ie?`Loading...`:ae})]})]}),(0,k.jsxs)(`div`,{className:`w-full`,children:[V&&l?.prizesAdded>0&&l.creatorAddress!==I?.toString()?(0,k.jsx)(`div`,{className:`w-full`,children:(0,k.jsx)(`div`,{className:`w-full flex mt-10`,children:(0,k.jsx)(x,{onclick:X,text:`Press To Spin`,className:`w-full h-12`,disabled:E.isPending||W||Y.length===0||!I})})}):l.creatorAddress===I?.toString()?(0,k.jsx)(`div`,{className:`w-full bg-gray-1300 rounded-full flex items-center justify-center h-12 my-10`,children:(0,k.jsx)(`p`,{className:`text-base text-black-1000 text-center font-semibold font-inter`,children:`You are the creator of this gumball`})}):(0,k.jsx)(`div`,{className:`w-full bg-gray-1300 rounded-full flex items-center justify-center h-12 my-10`,children:(0,k.jsx)(`p`,{className:`text-base text-black-1000 text-center font-semibold font-inter`,children:l.status===`CANCELLED`?`Cancelled`:l.status===`COMPLETED_SUCCESSFULLY`||l.status===`COMPLETED_FAILED`?`Ended`:`Not Started Yet`})}),(0,k.jsxs)(`div`,{className:`w-full flex items-center gap-4 mt-10`,children:[(0,k.jsx)(`div`,{className:`flex-1`,children:(0,k.jsx)(`div`,{className:`w-full bg-gray-1300 rounded-full h-4 relative`,children:(0,k.jsx)(`div`,{className:`bg-primary-color rounded-full absolute left-0 top-0 h-4 transition-all duration-300`,style:{width:`${Math.min(se,100)}%`}})})}),(0,k.jsx)(`div`,{className:``,children:(0,k.jsxs)(`p`,{className:`md:text-base text-sm text-black-1000 font-medium font-inter`,children:[l.ticketsSold,` / `,l.totalTickets,` sold`]})})]})]})]})]})})]}),(0,k.jsxs)(`div`,{className:`w-full`,children:[(0,k.jsx)(`ul`,{className:`flex items-center md:gap-5 gap-3 pb-8 md:pb-10 md:pt-[70px] pt-14`,children:z.map((e,t)=>(0,k.jsx)(`li`,{children:(0,k.jsx)(`button`,{onClick:()=>{B(z.map((e,n)=>({...e,active:n===t})))},className:`md:text-base text-sm cursor-pointer font-inter font-medium transition duration-300 hover:bg-primary-color text-black-1000 rounded-full py-3.5 md:px-5 px-3 ${e.active?`bg-primary-color`:`bg-gray-1400`}`,children:e.name})},t))}),z[0].active&&(0,k.jsxs)(`div`,{className:`md:grid md:grid-cols-2 items-start gap-5`,children:[(0,k.jsx)(D,{prizes:Y}),(0,k.jsx)(`div`,{className:`flex-1 md:-mt-px mt-10`,children:(0,k.jsx)(A,{spins:l.spins})})]})]})]})}),(0,k.jsx)(P,{isOpen:H,onClose:()=>{U(!1),G(!1),v(!1),m(null),b(null),q(!1),w(null)},prize:p,onClaimPrize:Q,isClaimPending:F.isPending,isClaimed:_,canClose:_})]})}export{F as component};