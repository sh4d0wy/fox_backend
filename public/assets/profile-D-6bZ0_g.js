import{C as e,Dn as t,Dt as n,E as r,Gn as i,Jn as a,Ot as o,R as s,S as c,Tn as l,Un as u,Vn as d,_n as f,an as p,cn as m,dn as h,et as g,fn as _,g as v,gn as y,hn as b,ht as x,in as S,ln as C,mn as w,nt as ee,on as T,ot as E,pn as D,rt as O,sn as te,tt as ne,un as k,w as A,xn as j,xt as M,yn as N,zn as P}from"./index-R1Am8Hoe.js";import{n as F}from"./aucations-data-C45XNGvy.js";import"./gumballs-data-CBFicVH1.js";import{t as re}from"./NoGumballs-Dx2521jE.js";import"./useClaimRafflePrize-lh9uRtz8.js";import{n as ie,r as ae,t as oe}from"./useCreatorProfileData-Cc0TfKhw.js";import{t as se}from"./Dropdown-BmSXQNS8.js";var I=a(i(),1),L=a(u(),1);const ce=({gumball:n,className:r})=>{let{publicKey:i}=t(),{favouriteGumball:a}=O(i?.toString()||``),{getFavouriteGumball:o}=ee(i?.toString()||``),{id:s,name:c=`Untitled Gumball`,creatorAddress:l=``,endTime:u=new Date().toISOString(),totalTickets:f=0,ticketsSold:p=0,ticketPrice:m=`0`,totalPrizeValue:h=`0`,prizes:g=[]}=n||{},_=(0,I.useMemo)(()=>!o.data||o.data.length===0?!1:o.data?.some(e=>e.id===s),[o.data,s]),v=async()=>{a.mutate({gumballId:s||0})},{totalValueInSol:y,isLoading:b,formattedValue:S}=A(n?.prizes),C=(f||0)-(p||0);(0,I.useMemo)(()=>{let e=g?.filter(e=>e.image);return e&&e.length>1},[g]),(0,I.useMemo)(()=>g?.find(e=>e.isNft?e.image:null)?.image||`/fox-logo.png`,[g]),(0,I.useMemo)(()=>{let e=new Date,t=new Date(u),n=Math.max(0,t.getTime()-e.getTime());return{hours:Math.floor(n/(1e3*60*60)),minutes:Math.floor(n%(1e3*60*60)/(1e3*60)),seconds:Math.floor(n%(1e3*60)/1e3)}},[u]);let w=(0,I.useMemo)(()=>{let e=parseFloat(S)||0,t=f*(parseFloat(m)/10**(M.find(e=>e.address===n.ticketMint)?.decimals||0));return t===0?`0.00`:(e/t).toFixed(2)},[S,f,m,n.ticketMint]),T=(0,I.useMemo)(()=>parseFloat(S)||0,[S]),E=(0,I.useMemo)(()=>l?`${l.slice(0,4)}...${l.slice(-4)}`:`Unknown`,[l]),D=(0,I.useMemo)(()=>parseFloat(m)||0,[m]);return(0,L.jsxs)(`div`,{className:`bg-white-1000 border border-gray-1100 rounded-2xl ${r||``}`,children:[(0,L.jsxs)(`div`,{className:`w-full flex items-center justify-between p-4`,children:[(0,L.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,L.jsx)(`img`,{src:`/icons/user-avatar.png`,alt:E,className:`w-6 h-6 rounded-full object-cover`}),(0,L.jsx)(`h4`,{className:`text-sm font-semibold font-inter text-black-1000`,children:E})]}),(0,L.jsx)(`div`,{className:`relative flex items-center justify-end`,children:n.status===`ACTIVE`&&(0,L.jsx)(`p`,{className:`text-xs font-semibold font-inter text-green-500 border border-gray-300 rounded-lg px-4 py-1  absolute z-10`,children:`Active`})})]}),(0,L.jsxs)(`div`,{className:`w-full relative group`,children:[(0,L.jsx)(e,{prizes:g,className:`w-full border-y border-gray-1100 h-[300px]`,rotation:-25,gridSize:3}),(0,L.jsxs)(`div`,{className:`w-full h-full flex flex-col items-start justify-between p-4 absolute top-0 left-0`,children:[(0,L.jsxs)(`div`,{className:`w-full h-full transition duration-300 group-hover:visible group-hover:opacity-100 invisible opacity-0 absolute left-0 p-4 top-0 flex flex-col items-start justify-between`,children:[(0,L.jsx)(`button`,{onClick:v,className:`bg-black/60 ml-auto cursor-pointer rounded-lg inline-flex items-center justify-center p-2.5`,children:_?(0,L.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,fill:`#F08409`,viewBox:`0 0 256 256`,children:(0,L.jsx)(`path`,{d:`M240,102c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0C119.79,228.66,16,172,16,102A62.07,62.07,0,0,1,78,40c20.65,0,38.73,8.88,50,23.89C139.27,48.88,157.35,40,178,40A62.07,62.07,0,0,1,240,102Z`})}):(0,L.jsx)(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,fill:`#F08409`,viewBox:`0 0 256 256`,children:(0,L.jsx)(`path`,{d:`M178,40c-20.65,0-38.73,8.88-50,23.89C116.73,48.88,98.65,40,78,40a62.07,62.07,0,0,0-62,62c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,228.66,240,172,240,102A62.07,62.07,0,0,0,178,40ZM128,214.8C109.74,204.16,32,155.69,32,102A46.06,46.06,0,0,1,78,56c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,155.61,146.24,204.15,128,214.8Z`})})}),(0,L.jsx)(`div`,{className:`w-full`,children:(0,L.jsx)(d,{to:`/gumballs/create_gumballs/$id`,params:{id:s.toString()},className:`w-full transition duration-300 hover:opacity-90 flex items-center justify-center py-1.5 px-6 h-11 text-white font-semibold font-inter bg-primary-color rounded-full`,children:`Gumball Studio`})})]}),(0,L.jsxs)(`div`,{className:`w-full  h-full flex transition duration-300 group-hover:invisible group-hover:opacity-0 visible opacity-100 flex-col items-start justify-between`,children:[(0,L.jsx)(x,{endsAt:new Date(u),status:n.status==`ACTIVE`?`ACTIVE`:n.status===`CANCELLED`?`CANCELLED`:`ENDED`}),(0,L.jsxs)(`div`,{className:`w-full flex items-center  gap-1.5`,children:[(0,L.jsx)(`div`,{className:`inline-flex items-center justify-center px-2.5 py-1 rounded-lg bg-black/60`,children:(0,L.jsxs)(`p`,{className:`text-xs font-semibold font-inter uppercase text-white`,children:[`EV : `,(0,L.jsx)(`span`,{children:w})]})}),(0,L.jsx)(`div`,{className:`inline-flex items-center justify-center px-2.5 py-1 rounded-lg bg-black/60`,children:(0,L.jsxs)(`p`,{className:`text-xs font-semibold font-inter uppercase text-white`,children:[`VAL : `,(0,L.jsx)(`span`,{children:T/10**(M.find(e=>e.address===n.ticketMint)?.decimals||0)})]})})]})]})]})]}),(0,L.jsxs)(`div`,{className:`w-full flex flex-col px-4 py-4 gap-1`,children:[(0,L.jsx)(`div`,{className:`w-full flex items-center gap-5 justify-between`,children:(0,L.jsx)(`h3`,{className:`md:text-2xl text-lg text-black-1000 font-bold font-inter`,children:c})}),(0,L.jsxs)(`div`,{className:`w-full flex flex-col items-center justify-between gap-1.5`,children:[(0,L.jsxs)(`div`,{className:`w-full flex items-center justify-between gap-5`,children:[(0,L.jsx)(`h4`,{className:`text-sm text-gray-1200 font-inter`,children:`Gumball Prizes left`}),(0,L.jsx)(`h4`,{className:`text-sm text-gray-1200 text-right font-inter`,children:`Price`})]}),(0,L.jsxs)(`div`,{className:`w-full flex items-center justify-between gap-5`,children:[f===p?(0,L.jsx)(`h4`,{className:`text-base text-red-1000 font-semibold font-inter`,children:`SOLD OUT`}):(0,L.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-semibold`,children:[C,`/`,f]}),(0,L.jsxs)(`h4`,{className:`md:text-base text-sm text-primary-color text-right font-inter font-semibold`,children:[(0,L.jsx)(`span`,{children:D/10**(M.find(e=>e.address===n.ticketMint)?.decimals||0)}),` `,M.find(e=>e.address===n.ticketMint)?.symbol||`SOL`]})]})]})]})]})},le=({gumball:e,className:t})=>{let{id:n,name:r=`Untitled Gumball`,creatorAddress:i=``,totalTickets:a=0,ticketsSold:o=0,ticketPrice:s=`0`,totalPrizeValue:c=`0`,prizes:l=[],ticketMint:u,userSpins:f,spinsBought:p=0,spins:m=[]}=e||{},h=(a||0)-(o||0),g=(0,I.useMemo)(()=>l?.find(e=>e.image)?.image||`/images/gumballs/sol-img-frame.png`,[l]),_=M.find(e=>e.address===u)?.decimals||0,v=M.find(e=>e.address===u)?.symbol||`SOL`,y=parseFloat(s)||0,b=f||m?.length||0,x=b*y;(0,I.useMemo)(()=>!m||m.length===0?0:m.filter(e=>parseFloat(e.prizeAmount)>0).length,[m]);let S=(0,I.useMemo)(()=>i?`${i.slice(0,4)}...${i.slice(-4)}`:`Unknown`,[i]);return(0,L.jsxs)(`div`,{className:`bg-transparent hover:bg-gray-1300 w-full transition duration-300 border border-gray-1100 rounded-2xl ${t||``}`,children:[(0,L.jsxs)(`div`,{className:`w-full flex gap-5 p-5 sm:flex-row flex-col`,children:[(0,L.jsx)(`img`,{src:g,alt:r,className:`object-cover w-[109px] h-[109px] rounded-lg`}),(0,L.jsxs)(`div`,{className:`flex-1`,children:[(0,L.jsxs)(`div`,{className:`flex w-full items-center justify-between`,children:[(0,L.jsx)(`h3`,{className:`xl:text-2xl text-xl text-black-1000 font-bold font-inter`,children:r}),(0,L.jsx)(d,{to:`/gumballs/$id`,params:{id:n.toString()},className:`w-10 h-10 transition duration-300 hover:opacity-90 flex items-center justify-center text-white font-semibold font-inter bg-primary-color rounded-md`,children:(0,L.jsx)(`svg`,{width:20,height:20,viewBox:`0 0 20 20`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,L.jsx)(`path`,{d:`M7.5 4.16665L13.3333 9.99998L7.5 15.8333`,stroke:`#212121`,strokeWidth:`1.66667`,strokeLinecap:`round`,strokeLinejoin:`round`})})})]}),(0,L.jsxs)(`div`,{className:`w-full gap-6 flex justify-between mt-6 md:flex-row flex-col`,children:[(0,L.jsxs)(`div`,{className:`flex flex-col gap-1.5`,children:[(0,L.jsx)(`div`,{className:`inline-flex gap-2.5 items-center`,children:(0,L.jsxs)(`p`,{className:`text-sm text-black-1000 font-semibold font-inter`,children:[l.length,` Prizes Available`]})}),(0,L.jsx)(`p`,{className:`text-sm font-medium text-primary-color font-inter`,children:S})]}),(0,L.jsx)(`p`,{className:`text-base mt-auto text-primary-color font-medium font-inter`,children:v})]})]})]}),(0,L.jsx)(`div`,{className:`border-t border-gray-1100`}),(0,L.jsxs)(`div`,{className:`w-full grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-5 md:gap-10 p-5`,children:[(0,L.jsxs)(`div`,{children:[(0,L.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Tickets remaining`}),a===o?(0,L.jsx)(`h4`,{className:`text-base text-red-1000 font-semibold font-inter`,children:`SOLD OUT`}):(0,L.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[h,`/`,a]})]}),(0,L.jsxs)(`div`,{className:`flex-1`,children:[(0,L.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Price per Spin`}),(0,L.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[(0,L.jsx)(`span`,{children:y/10**_}),` `,v]})]}),(0,L.jsxs)(`div`,{className:`flex-1`,children:[(0,L.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Spins Bought`}),(0,L.jsx)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:(0,L.jsx)(`span`,{children:b})})]}),(0,L.jsxs)(`div`,{className:`flex-1`,children:[(0,L.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Prizes Won`}),(0,L.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[(0,L.jsx)(`span`,{children:f}),` Prizes`]})]}),(0,L.jsxs)(`div`,{className:`flex-1`,children:[(0,L.jsx)(`h4`,{className:`text-sm mb-1.5 text-gray-1200 font-inter`,children:`Spent`}),(0,L.jsxs)(`h4`,{className:`md:text-base text-sm text-black-1000 font-inter font-medium`,children:[(0,L.jsx)(`span`,{children:x/10**_}),` `,v]})]})]})]})},ue=(e,t=`Rafflers`,n=`created`)=>{let r=t===`Rafflers`,i=t===`Gumballs`,a=t===`Auctions`;return{getRaffleStats:P({queryKey:[`profile-raffle-stats`,e],queryFn:async()=>await D(e),enabled:!!e&&r,staleTime:6e4}),getGumballStats:P({queryKey:[`profile-gumball-stats`,e],queryFn:async()=>await _(e),enabled:!!e&&i,staleTime:6e4}),getAuctionStats:P({queryKey:[`profile-auction-stats`,e],queryFn:async()=>await h(e),enabled:!!e&&a,staleTime:6e4}),getRaffleCreatedCards:P({queryKey:[`profile-raffle-created`,e],queryFn:async()=>(await w(e)).raffles,enabled:!!e&&r&&n===`created`,staleTime:6e4}),getRafflePurchasedCards:P({queryKey:[`profile-raffle-purchased`,e],queryFn:async()=>(await y(e)).raffles,enabled:!!e&&r&&n===`purchased`,staleTime:6e4}),getRaffleFavouriteCards:P({queryKey:[`profile-raffle-favourite`,e],queryFn:async()=>(await b(e)).raffles,enabled:!!e&&r&&n===`favourite`,staleTime:6e4}),getGumballCreatedCards:P({queryKey:[`profile-gumball-created`,e],queryFn:async()=>(await te(e)).gumballs,enabled:!!e&&i&&n===`created`,staleTime:6e4}),getGumballPurchasedCards:P({queryKey:[`profile-gumball-purchased`,e],queryFn:async()=>(await C(e)).gumballs,enabled:!!e&&i&&n===`purchased`,staleTime:6e4}),getGumballFavouriteCards:P({queryKey:[`profile-gumball-favourite`,e],queryFn:async()=>(await m(e)).gumballs,enabled:!!e&&i&&n===`favourite`,staleTime:6e4}),getAuctionCreatedCards:P({queryKey:[`profile-auction-created`,e],queryFn:async()=>(await S(e)).auctions,enabled:!!e&&a&&n===`created`,staleTime:6e4}),getAuctionPurchasedCards:P({queryKey:[`profile-auction-purchased`,e],queryFn:async()=>(await T(e)).auctions,enabled:!!e&&a&&n===`purchased`,staleTime:6e4}),getAuctionFavouriteCards:P({queryKey:[`profile-auction-favourite`,e],queryFn:async()=>(await p(e)).auctions,enabled:!!e&&a&&n===`favourite`,staleTime:6e4})}};function de({isOpen:e,onClose:t,currentImage:r,onImageChange:i,isUploading:a=!1}){let[s,c]=(0,I.useState)(null),[l,u]=(0,I.useState)(null),[d,f]=(0,I.useState)(!1),p=(0,I.useRef)(null),m=e=>{let t=e.target.files?.[0];t&&h(t)},h=e=>{if(!e.type.startsWith(`image/`)){E.error(`Please upload an image file`);return}if(e.size>5*1024*1024){E.error(`Image size should be less than 5MB`);return}u(e);let t=new FileReader;t.onloadend=()=>{c(t.result)},t.readAsDataURL(e)},g=e=>{e.preventDefault(),f(!0)},_=e=>{e.preventDefault(),f(!1)},v=e=>{e.preventDefault(),f(!1);let t=e.dataTransfer.files?.[0];t&&h(t)},y=async()=>{l&&s&&(await i(l,s),b())},b=()=>{c(null),u(null),t()};return(0,L.jsx)(n,{open:e,as:`div`,className:`relative z-50 focus:outline-none`,onClose:b,children:(0,L.jsx)(`div`,{className:`fixed inset-0 z-50 w-screen overflow-y-auto bg-black/80 backdrop-blur-sm`,children:(0,L.jsx)(`div`,{className:`flex min-h-full items-center justify-center p-4`,children:(0,L.jsxs)(o,{transition:!0,className:`w-full max-w-[480px] rounded-2xl bg-white shadow-2xl duration-300 ease-out data-closed:transform-[scale(95%)] data-closed:opacity-0`,children:[(0,L.jsxs)(`div`,{className:`flex items-center justify-between border-b border-gray-200 px-6 pt-6 pb-4`,children:[(0,L.jsx)(`h4`,{className:`text-xl text-black-1000 font-bold font-inter`,children:`Update Profile Picture`}),(0,L.jsx)(`button`,{onClick:b,disabled:a,className:`flex items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 cursor-pointer transition duration-300 disabled:opacity-50 disabled:cursor-not-allowed`,children:(0,L.jsx)(`img`,{src:`/icons/cross-icon.svg`,alt:`close`,className:`w-4 h-4`})})]}),(0,L.jsxs)(`div`,{className:`w-full px-6 py-6 space-y-6`,children:[(0,L.jsxs)(`div`,{className:`flex flex-col items-center`,children:[(0,L.jsxs)(`div`,{className:`relative group`,children:[(0,L.jsx)(`div`,{className:`w-32 h-32 rounded-full overflow-hidden border-4 border-primary-color shadow-lg`,children:(0,L.jsx)(`img`,{src:s||r,alt:`Profile Preview`,className:`w-full h-full object-cover`})}),s&&(0,L.jsx)(`div`,{className:`absolute -top-2 -right-2`,children:(0,L.jsx)(`span`,{className:`flex h-6 w-6 items-center justify-center rounded-full bg-green-500 text-white text-xs font-bold shadow-md`,children:`âœ“`})})]}),(0,L.jsx)(`p`,{className:`text-sm text-gray-500 mt-3 font-inter`,children:s?`New image preview`:`Current profile picture`})]}),(0,L.jsxs)(`div`,{onClick:a?void 0:()=>{p.current?.click()},onDragOver:a?void 0:g,onDragLeave:a?void 0:_,onDrop:a?void 0:v,className:`
                  w-full border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300
                  ${a?`opacity-50 cursor-not-allowed`:`cursor-pointer`}
                  ${d?`border-primary-color bg-primary-color/10 scale-[1.02]`:`border-gray-300 hover:border-primary-color hover:bg-gray-50`}
                `,children:[(0,L.jsx)(`input`,{ref:p,type:`file`,accept:`image/*`,onChange:m,className:`hidden`,disabled:a}),(0,L.jsxs)(`div`,{className:`flex flex-col items-center gap-3`,children:[(0,L.jsx)(`div`,{className:`w-14 h-14 rounded-full bg-gray-100 flex items-center justify-center`,children:(0,L.jsx)(`svg`,{className:`w-7 h-7 text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,L.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z`})})}),(0,L.jsxs)(`div`,{children:[(0,L.jsx)(`p`,{className:`text-base font-semibold text-black-1000 font-inter`,children:d?`Drop your image here`:`Click to upload or drag and drop`}),(0,L.jsx)(`p`,{className:`text-sm text-gray-500 mt-1 font-inter`,children:`PNG, JPG, GIF up to 5MB`})]})]})]}),(0,L.jsxs)(`div`,{className:`flex gap-3 pt-2`,children:[(0,L.jsx)(`button`,{onClick:b,disabled:a,className:`flex-1 py-3 px-6 rounded-full border border-gray-300 text-black-1000 font-semibold font-inter text-sm hover:bg-gray-50 transition duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed`,children:`Cancel`}),(0,L.jsx)(`button`,{onClick:y,disabled:!l||a,className:`
                    flex-1 py-3 px-6 rounded-full font-semibold font-inter text-sm transition duration-300
                    ${l&&!a?`bg-primary-color text-black-1000 hover:opacity-90 hover:shadow-lg cursor-pointer`:`bg-gray-200 text-gray-400 cursor-not-allowed`}
                  `,children:a?(0,L.jsxs)(`span`,{className:`flex items-center justify-center gap-2`,children:[(0,L.jsxs)(`svg`,{className:`animate-spin h-4 w-4`,viewBox:`0 0 24 24`,children:[(0,L.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`,fill:`none`}),(0,L.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),`Uploading...`]}):`Change Picture`})]})]})]})})})})}var R=`/icons/user-avatar.png`;const fe=N()(r(e=>({profilePicture:R,isUploadingProfilePicture:!1,profilePictureError:null,setProfilePicture:t=>e({profilePicture:t,profilePictureError:null}),setIsUploadingProfilePicture:t=>e({isUploadingProfilePicture:t}),setProfilePictureError:t=>e({profilePictureError:t}),resetProfilePicture:()=>e({profilePicture:R,profilePictureError:null})}),{name:`fox-user-storage`,partialize:e=>({profilePicture:e.profilePicture})})),pe=e=>P({queryKey:[`my-profile`],queryFn:k,enabled:e&&!!localStorage.getItem(`authToken`),staleTime:300*1e3,retry:1});var z=[{label:`Newest First`,value:`newest`},{label:`Oldest First`,value:`oldest`},{label:`Price: High to Low`,value:`price_high`},{label:`Price: Low to High`,value:`price_low`},{label:`Ending Soon`,value:`ending_soon`}],me=[...z,{label:`Unclaimed Prizes`,value:`unclaimed_winner`}];function B(){let{mainFilter:e,setMainFilter:n,rafflerFilter:r,setRafflerFilter:i,activeRafflerTab:a,setActiveRafflerTab:o,enabled:u,setEnabled:d,sortOption:p,setSortOption:m}=v(),{publicKey:h}=t(),{profilePicture:_,setProfilePicture:y,isUploadingProfilePicture:b,setIsUploadingProfilePicture:x,setProfilePictureError:S}=fe(),[C,w]=(0,I.useState)(!1),{data:T}=pe(!!h&&!!localStorage.getItem(`authToken`));(0,I.useEffect)(()=>{T?.user?.profileImage?y(`${j}${T.user.profileImage}`):T?.user&&y(R)},[T,y]);let D=async(e,t)=>{try{x(!0),S(null);let t=await f(e);t.imageUrl&&y(`${j}${t.imageUrl}`),E.success(`Profile picture updated successfully!`)}catch(e){console.error(`Failed to update profile picture:`,e),S(`Failed to update profile picture`),E.error(`Failed to update profile picture. Please try again.`)}finally{x(!1)}},{data:O,isLoading:te}=oe({Rafflers:`rafflers`,Gumballs:`gumballs`,Auctions:`auctions`}[e],r);O?.created,O?.purchased;let k=(()=>{switch(e){case`Rafflers`:return[{label:`Raffles Created`,value:`created`},{label:`Raffles Purchased`,value:`purchased`},{label:`Favourite Raffles`,value:`favourite`}];case`Auctions`:return[{label:`Auctions Created`,value:`created`},{label:`Auctions Participated`,value:`purchased`},{label:`Favourite Auctions`,value:`favourite`}];case`Gumballs`:return[{label:`Gumballs Created`,value:`created`},{label:`Gumballs Purchased`,value:`purchased`},{label:`Favourite Gumballs`,value:`favourite`}];default:return[]}})(),{getRaffleStats:A,getGumballStats:M,getAuctionStats:N,getRaffleCreatedCards:P,getRafflePurchasedCards:B,getGumballCreatedCards:V,getGumballPurchasedCards:H,getAuctionCreatedCards:U,getAuctionPurchasedCards:he}=ue(h?.toBase58()??``,e,r),{getFavouriteRaffle:ge,getFavouriteGumball:_e,getFavouriteAuction:ve}=ee(h?.toBase58()??``,e,r),W=A.data?.stats,G=M.data?.stats,K=N.data?.stats,q=P.data??[],J=B.data??[],Y=V.data??[],X=H.data??[],ye=U.data??[],be=he.data??[],xe=ge.data,Se=_e.data,Z=ve.data,Q=(e,t=!1)=>!e||e.length===0?e:p===`unclaimed_winner`&&t?[...e].filter(e=>e.isWinner===!0&&e.hasClaimed===!1).sort((e,t)=>new Date(t.createdAt||t.created_at||0).getTime()-new Date(e.createdAt||e.created_at||0).getTime()):[...e].sort((e,t)=>{switch(p){case`newest`:return new Date(t.createdAt||t.created_at||0).getTime()-new Date(e.createdAt||e.created_at||0).getTime();case`oldest`:return new Date(e.createdAt||e.created_at||0).getTime()-new Date(t.createdAt||t.created_at||0).getTime();case`price_high`:return(t.ticketPrice||t.reservePrice||t.spinPrice||0)-(e.ticketPrice||e.reservePrice||e.spinPrice||0);case`price_low`:return(e.ticketPrice||e.reservePrice||e.spinPrice||0)-(t.ticketPrice||t.reservePrice||t.spinPrice||0);case`ending_soon`:return new Date(e.endDate||e.end_date||e.endTime||0).getTime()-new Date(t.endDate||t.end_date||t.endTime||0).getTime();default:return 0}}),Ce=(0,I.useMemo)(()=>Q(q),[q,p]),we=(0,I.useMemo)(()=>Q(J,!0),[J,p]),Te=(0,I.useMemo)(()=>Q(Y),[Y,p]),Ee=(0,I.useMemo)(()=>Q(X),[X,p]),De=(0,I.useMemo)(()=>Q(ye),[ye,p]),Oe=(0,I.useMemo)(()=>Q(be),[be,p]),ke=(0,I.useMemo)(()=>Q(xe??[]),[xe,p]),Ae=(0,I.useMemo)(()=>Q(Se??[]),[Se,p]),je=(0,I.useMemo)(()=>Q(Z??[]),[Z,p]),$=(0,I.useMemo)(()=>e===`Rafflers`&&a===`purchased`?me:z,[e,a]),Me=$.find(e=>e.value===p)?.label||`Sort Entries`;return(0,L.jsxs)(`main`,{className:`main font-inter`,children:[(0,L.jsx)(`section`,{className:`w-full pt-[60px] pb-[120px]`,children:(0,L.jsx)(`div`,{className:`w-full max-w-[1440px] px-5 mx-auto`,children:(0,L.jsxs)(`div`,{className:`w-full flex lg:flex-row flex-col gap-7`,children:[(0,L.jsxs)(`div`,{className:`flex-1 space-y-5 md:max-w-[320px]`,children:[(0,L.jsxs)(`div`,{className:`w-full bg-gray-1300 border border-gray-1100 rounded-[18px] py-5`,children:[(0,L.jsx)(`div`,{className:`w-full flex justify-center mb-4`,children:(0,L.jsxs)(`div`,{onClick:()=>w(!0),className:`relative group cursor-pointer`,children:[(0,L.jsx)(`div`,{className:`w-24 h-24 rounded-full overflow-hidden border-4 border-primary-color shadow-lg transition-transform duration-300 group-hover:scale-105`,children:(0,L.jsx)(`img`,{src:_,alt:`Profile`,className:`w-full h-full object-cover`,onError:e=>{e.currentTarget.src=R}})}),(0,L.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300`,children:(0,L.jsxs)(`div`,{className:`flex flex-col items-center text-white`,children:[(0,L.jsxs)(`svg`,{className:`w-6 h-6`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,L.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z`}),(0,L.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 13a3 3 0 11-6 0 3 3 0 016 0z`})]}),(0,L.jsx)(`span`,{className:`text-xs mt-1 font-medium`,children:`Edit`})]})})]})}),(0,L.jsx)(`div`,{className:`w-full px-4`,children:(0,L.jsx)(`div`,{className:`w-full flex ${h?`justify-between`:`justify-center`} items-center  gap-5 mb-4`,children:h?(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(`h4`,{className:`text-lg text-primary-color font-inter font-semibold w-full text-center`,children:h?.toBase58().slice(0,6)+`...`+h?.toBase58().slice(-6)})}):(0,L.jsx)(l,{className:` w-full h-11 px-6 py-2.5 rounded-full bg-linear-to-r from-black-1000 via-neutral-500 to-black-1000 hover:from-primary-color hover:via-primary-color hover:to-primary-color text-white  font-semibold`})})})]}),(0,L.jsx)(`div`,{className:`w-full border space-y-2.5 border-gray-1100 rounded-[18px] md:p-5 p-3`,children:(0,L.jsx)(`div`,{className:`flex flex-col gap-2`,children:k.map(e=>(0,L.jsx)(`button`,{onClick:()=>{i(e.value),o(e.value)},className:`
                            text-sm cursor-pointer transition px-5 py-3 text-start font-semibold font-inter w-full rounded-full
                            ${r===e.value?`bg-primary-color text-black-1000`:`bg-transparent text-black-1000 hover:bg-gray-1500`}
                          `,children:e.label},e.value))})}),(0,L.jsxs)(`div`,{className:`w-full border border-gray-1100 rounded-[18px] p-5`,children:[(0,L.jsxs)(`h3`,{className:`text-lg text-black-1000 font-semibold font-inter`,children:[e===`Rafflers`&&`Raffle Stats`,e===`Gumballs`&&`Gumball Stats`,e===`Auctions`&&`Auction Stats`]}),(0,L.jsxs)(`ul`,{className:`mt-2`,children:[e===`Rafflers`&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Raffles Bought`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:W?.rafflesBought??0})]}),(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Tickets Bought`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:W?.ticketsBought??0})]}),(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Raffles Won`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:W?.rafflesWon??0})]}),(0,L.jsx)(`li`,{className:`flex items-center justify-between`})]}),e===`Gumballs`&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Gumballs Created`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:G?.gumballsCreated??0})]}),(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Total Spins`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:G?.totalSpins??0})]}),(0,L.jsx)(`li`,{className:`flex items-center justify-between`})]}),e===`Auctions`&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Auctions Participated`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:K?.auctionsParticipated??0})]}),(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Auctions Won`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:K?.auctionsWon??0})]}),(0,L.jsxs)(`li`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-start text-gray-1200`,children:`Total bids`}),(0,L.jsx)(`p`,{className:`md:text-base text-sm font-medium font-inter text-black-1000 text-right`,children:K?.totalBids??0})]}),(0,L.jsx)(`li`,{className:`flex items-center justify-between`})]})]})]})]}),(0,L.jsxs)(`div`,{className:`flex-1`,children:[(0,L.jsxs)(`div`,{className:`w-full flex flex-wrap gap-5 items-center justify-between`,children:[(0,L.jsx)(`ul`,{className:`flex items-center md:gap-5 gap-3`,children:[`Rafflers`,`Auctions`,`Gumballs`].map(t=>(0,L.jsx)(`li`,{children:(0,L.jsx)(`button`,{onClick:()=>{n(t),i(`created`),o(`created`)},className:`text-base cursor-pointer hover:bg-primary-color font-inter font-medium transition duration-300 rounded-full md:py-3.5 py-2 md:px-5 px-3 ${e===t?`bg-primary-color`:`bg-gray-1400`}`,children:t})},t))}),(0,L.jsx)(se,{options:$,value:{label:Me,value:p},onChange:e=>{m(e.value)}})]}),(0,L.jsxs)(`div`,{className:`w-full`,children:[e===`Rafflers`&&(0,L.jsx)(L.Fragment,{children:P.isLoading?(0,L.jsx)(`div`,{className:`grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4`,children:Array.from({length:6}).map((e,t)=>(0,L.jsx)(g,{},t))}):(a===`purchased`?we:a===`favourite`?ke:Ce).length<1?(0,L.jsx)(s,{}):(0,L.jsx)(`div`,{className:`grid ${a===`purchased`?`grid-cols-1`:a===`favourite`?`grid-cols-3`:`lg:grid-cols-3 md:grid-cols-2 grid-cols-1`} lg:gap-y-10 lg:gap-x-[26px] gap-4`,children:a===`purchased`?we.map(e=>(0,L.jsx)(ae,{...e,isWinner:e.isWinner,hasClaimed:e.hasClaimed},e.id)):a===`favourite`?ke?.map(e=>(0,L.jsx)(ne,{raffle:e,soldTickets:e.ticketSold},e.id)):Ce.map(e=>(0,L.jsx)(ne,{raffle:e,soldTickets:e.ticketSold},e.id))})}),e===`Auctions`&&(0,L.jsx)(L.Fragment,{children:U.isLoading?(0,L.jsx)(`div`,{className:`grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4`,children:Array.from({length:6}).map((e,t)=>(0,L.jsx)(g,{},t))}):(a===`purchased`?Oe:a===`favourite`?je:De).length<1?(0,L.jsx)(ie,{}):(0,L.jsx)(`div`,{className:`grid ${a===`purchased`?`grid-cols-1`:`lg:grid-cols-3 md:grid-cols-2 grid-cols-1`} lg:gap-y-10 lg:gap-x-[26px] gap-4`,children:a===`purchased`?Oe.map(e=>(0,L.jsx)(F,{...e,id:e.id??0,prizeName:e.prizeName??``,prizeImage:e.prizeImage??``,collectionName:e.collectionName??``,reservePrice:e.reservePrice??``},e.id)):a===`favourite`?je?.map(e=>(0,L.jsx)(F,{...e,id:e.id??0,prizeName:e.prizeName??``,prizeImage:e.prizeImage??``,collectionName:e.collectionName??``,reservePrice:e.reservePrice??``},e.id)):De.map(e=>(0,L.jsx)(F,{...e,id:e.id??0,prizeName:e.prizeName??``,prizeImage:e.prizeImage??``,collectionName:e.collectionName??``,reservePrice:e.reservePrice??``},e.id))})}),e===`Gumballs`&&(0,L.jsx)(L.Fragment,{children:V.isLoading||H.isLoading?(0,L.jsx)(`div`,{className:`grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-4`,children:Array.from({length:6}).map((e,t)=>(0,L.jsx)(g,{},t))}):(a===`purchased`?Ee:a===`favourite`?Ae:Te).length<1?(0,L.jsx)(re,{}):(0,L.jsx)(`div`,{className:`grid ${a===`purchased`?`grid-cols-1`:`lg:grid-cols-3 md:grid-cols-2 grid-cols-1`} lg:gap-y-10 lg:gap-x-[26px] gap-4`,children:a===`purchased`?Ee.map(e=>(0,L.jsx)(le,{gumball:e},e.id)):a===`favourite`?Ae?.map(e=>(0,L.jsx)(c,{gumball:e},e.id)):Te.map(e=>(0,L.jsx)(ce,{gumball:e},e.id))})})]})]})]})})}),(0,L.jsx)(de,{isOpen:C,onClose:()=>w(!1),currentImage:_,onImageChange:D,isUploading:b})]})}export{B as component};